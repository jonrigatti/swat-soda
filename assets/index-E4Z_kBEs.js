import{_ as $e,a as We,b as Ye,V as ae,u as it,c as lt,d as ot,p as st,e as ut,f as rt,g as dt,h as mt,i as ct,j as vt,k as bt,l as ft,m as pt,n as Ct,o as Bt,q as gt,r as yt,s as Dt,t as At}from"./StakeholdersComponent-CT_ySOJo.js";import{$ as me,_ as Ce,I as Oe,k as R,K as V,o as p,a0 as G,P as U,Q as T,b as t,w as n,R as N,a as F,B as Y,g as b,t as E,v as C,z as Ee,W as pe,x as Q,y as q,H as Me,r as h,Z as we,a1 as kt,U as w,N as ie,T as be,a2 as St,a3 as ce,p as Ne,a4 as Ue,h as Re,u as ht,j as Te,q as Vt,M as Ft,d as O,a5 as Pt,A as Qe,C as xt,a6 as qe,a7 as Ze,a8 as Et,a9 as wt,aa as _t,ab as It,ac as $t,ad as Ot,ae as Mt,af as Nt,J as ne,ag as Rt,O as W,S as ve,X as Ut,Y as Tt,ah as Gt}from"./index-2apwaa3O.js";import{V as Fe}from"./vue-draggable-next.esm-bundler-BaO0yZ9m.js";import{b as H,a as _,f as fe,c as J,V as M,d as le,g as Lt}from"./VCard-BXG7veYA.js";import{_ as Ge}from"./lodash-Ch7C1od2.js";class Jt{testDir(){return me.get("/server/testdir")}createSDF(i,a){return console.log("SDF creation: "+JSON.stringify(a)),me.put(`/server/createSDF/${i}`,a).then(function(s){console.log("Then: "+JSON.stringify(a)),console.log(s)})}createPDF(i,a){return console.log("PDF creation: "+JSON.stringify(a)),me.put(`/server/createPDF/${i}`,a).then(function(s){console.log("Then: "+JSON.stringify(a)),console.log(s)})}mergePDF(i,a){return console.log("PDF merging: "+JSON.stringify(a)),me.put(`/server/mergePDF/${i}`,a).then(function(s){console.log("Then: "+JSON.stringify(a)),console.log(s)})}}const Pe=new Jt,Ht={key:0},Kt={key:1},zt={__name:"PriorityMenuComponent",props:{submittalProp:{},color:{type:String,default:"cyan-darken-4"},showLabel:{type:Boolean,default:!1}},setup(e){const i=e,a=Oe(),s=c=>{a.updateSubmittalPriorities(c)},r=R(()=>{var c=[];return a.projects.forEach(f=>{f.prioritySubmittals.findIndex(d=>d.submittal._id===i.submittalProp._id)!=-1&&c.push(f)}),c}),m=R(()=>{var c=[];return a.projects.forEach(f=>{f.unrankedSubmittals.findIndex(d=>d.submittal._id===i.submittalProp._id)!=-1&&c.push(f)}),c});return(c,f)=>(p(),V("div",null,[Array.isArray(r.value)&&r.value.length||Array.isArray(m.value)&&m.value.length?e.showLabel?(p(),V("div",Kt,"Priority")):G("",!0):(p(),V("div",Ht,"Not assigned to project")),(p(!0),V(U,null,T(r.value,d=>(p(),V("span",{key:d._id},[t(pe,{"offset-y":""},{activator:n(({props:o})=>[t(C,Ee({class:"ma-2",ref_for:!0},o),{default:n(()=>[b(E(d.name)+" - "+E(d.prioritySubmittals.findIndex(D=>D.submittal._id===e.submittalProp._id)+1),1)]),_:2},1040)]),default:n(()=>[t(H,null,{default:n(()=>[t(N(Fe),{modelValue:d.prioritySubmittals,"onUpdate:modelValue":o=>d.prioritySubmittals=o,group:d.name+"Submittals",draggable:".item",handle:".handle",sort:"true",onChange:o=>s(d),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:n(()=>[(p(!0),V(U,null,T(d.prioritySubmittals,(o,D)=>(p(),F(_,{key:o.submittal._id,class:Y(o.submittal._id===e.submittalProp._id?`item bg-${e.color} draggable-item handle`:"item nondraggable-item")},{default:n(()=>[b(E(D+1)+". "+E(o.submittal.submittalID),1)]),_:2},1032,["class"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group","onChange"])]),_:2},1024)]),_:2},1024)]))),128)),(p(!0),V(U,null,T(m.value,d=>(p(),V("span",{key:d._id},[t(pe,{"offset-y":""},{activator:n(({props:o})=>[t(C,Ee({class:"ma-2",ref_for:!0},o),{default:n(()=>[b(E(d.name)+" - Unranked ",1)]),_:2},1040)]),default:n(()=>[t(H,null,{default:n(()=>[t(N(Fe),{modelValue:d.prioritySubmittals,"onUpdate:modelValue":o=>d.prioritySubmittals=o,group:d.name+"Submittals",draggable:".draggable-item",handle:".handle",sort:"true",onChange:o=>s(d),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:n(()=>[(p(!0),V(U,null,T(d.prioritySubmittals,(o,D)=>(p(),F(_,{key:o.submittal._id,class:Y(o.submittal._id===e.submittalProp._id?`item bg-${e.color} draggable-item handle`:"item nondraggable-item")},{default:n(()=>[b(E(D+1)+". "+E(o.submittal.submittalID),1)]),_:2},1032,["class"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group","onChange"])]),_:2},1024),t(H,null,{default:n(()=>[t(N(Fe),{modelValue:d.unrankedSubmittals,"onUpdate:modelValue":o=>d.unrankedSubmittals=o,group:d.name+"Submittals",draggable:".draggable-item",sort:"true",onChange:o=>s(d),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:n(()=>[(p(!0),V(U,null,T(d.unrankedSubmittals,o=>Q((p(),F(_,{key:o.submittal.submittalID,class:Y(o.submittal._id===e.submittalProp._id?`item bg-${e.color} draggable-item handle`:"item nondraggable-item")},{default:n(()=>[b(E(o.submittal.submittalID),1)]),_:2},1032,["class"])),[[q,o.submittal._id===e.submittalProp._id]])),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group","onChange"])]),_:2},1024)]),_:2},1024)]))),128))]))}},Xe=Ce(zt,[["__scopeId","data-v-4b97a0c0"]]),jt={__name:"SubmittalComponent",props:{submittal:{},color:{type:String,default:function(){return"cyan"}}},setup(e){const i=Me();Oe();const a=h(!1);h(!1);const s=d=>{i.updateSubmittal(d)},r=(d,o)=>{i.submittals.find(D=>D._id===filteredSubmittals.value[o]._id).violations.push(d)},m=d=>{Pe.createSDF(d._id,d).then(o=>{console.log(o.data)}).catch(o=>{console.log(o)})},c=d=>{Pe.createPDF(d._id,d).then(o=>{console.log(o.data)}).catch(o=>{console.log(o)})},f=d=>{Pe.mergePDF(d._id,d).then(o=>{console.log(o.data)}).catch(o=>{console.log(o)})};return(d,o)=>{const D=Xe,P=$e,y=We,I=Ye;return p(),V("div",null,[t(H,{class:"rounded-t-xl"},{default:n(()=>[t(we,{color:e.color},{default:n(()=>[t(kt,{text:e.submittal.submittalID},null,8,["text"]),t(C,{icon:"",onClick:o[0]||(o[0]=v=>a.value=!a.value)},{default:n(()=>[t(w,{class:Y(["toggleUpDown",{rotate:!a.value}])},{default:n(()=>o[11]||(o[11]=[b("mdi-chevron-up")])),_:1},8,["class"])]),_:1})]),_:1},8,["color"]),t(fe,null,{default:n(()=>[t(ie,{modelValue:e.submittal.description,"onUpdate:modelValue":o[1]||(o[1]=v=>e.submittal.description=v),modelModifiers:{lazy:!0},label:"Description"},null,8,["modelValue"]),t(J,{class:"pa-0 ma-0"},{default:n(()=>[t(M,null,{default:n(()=>[t(_,null,{default:n(()=>[t(ie,{modelValue:e.submittal.owner,"onUpdate:modelValue":o[2]||(o[2]=v=>e.submittal.owner=v),modelModifiers:{lazy:!0},label:"Owner","min-width":"200"},null,8,["modelValue"]),t(D,{submittalProp:e.submittal,color:e.color,showLabel:!0},null,8,["submittalProp","color"])]),_:1}),t(_,null,{default:n(()=>[t(P,{dateProp:e.submittal.receivedDate,labelProp:"Received Date",iconProp:"mdi-calendar-today",onUpdateDate:o[3]||(o[3]=v=>e.submittal.receivedDate=v)},null,8,["dateProp"]),t(P,{dateProp:e.submittal.needDate,labelProp:"Need Date",iconProp:"mdi-calendar-clock",onUpdateDate:o[4]||(o[4]=v=>e.submittal.needDate=v)},null,8,["dateProp"]),t(P,{dateProp:e.submittal.dispositionDate,labelProp:"Disposition Date",iconProp:"mdi-calendar-check",onUpdateDate:o[5]||(o[5]=v=>e.submittal.dispositionDate=v)},null,8,["dateProp"])]),_:1})]),_:1})]),_:1})]),_:1}),a.value?(p(),F(H,{key:0,class:"py-1"},{default:n(()=>[t(le,{class:"pa-2"},{default:n(()=>o[12]||(o[12]=[b("Stakeholders")])),_:1}),t(fe,null,{default:n(()=>[t(y,{stakeholders:e.submittal.stakeholders},null,8,["stakeholders"])]),_:1})]),_:1})):G("",!0),a.value?(p(),F(H,{key:1,class:"py-1"},{default:n(()=>[t(le,{class:"pa-2"},{default:n(()=>[t(I,{violations:e.submittal.violations},null,8,["violations"])]),_:1}),t(fe,null,{default:n(()=>[t(I,{violations:e.submittal.violations,onAddViolation:o[6]||(o[6]=v=>r(v,d.index))},null,8,["violations"])]),_:1})]),_:1})):G("",!0),t(Lt,{class:"grey darken-4"},{default:n(()=>[t(be),t(C,{icon:"",onClick:o[7]||(o[7]=v=>s(e.submittal))},{default:n(()=>[t(w,null,{default:n(()=>o[13]||(o[13]=[b("mdi-content-save-edit")])),_:1})]),_:1}),t(C,{icon:"",onClick:o[8]||(o[8]=v=>m(e.submittal))},{default:n(()=>[t(w,null,{default:n(()=>o[14]||(o[14]=[b("mdi-archive-plus")])),_:1})]),_:1}),t(C,{icon:"",onClick:o[9]||(o[9]=v=>c(e.submittal))},{default:n(()=>[t(w,null,{default:n(()=>o[15]||(o[15]=[b("mdi-file-pdf-box")])),_:1})]),_:1}),t(C,{icon:"",onClick:o[10]||(o[10]=v=>f(e.submittal))},{default:n(()=>[t(w,null,{default:n(()=>o[16]||(o[16]=[b("mdi-vector-combine")])),_:1})]),_:1})]),_:1})]),_:1})])}}},Wt=Ce(jt,[["__scopeId","data-v-4e870d42"]]),Yt={__name:"SubmittalSearchComponent",setup(e){const i=Me();h(!0);const a=h([{id:Math.random()*1e4,key:"",value:"",andOr:"and",operator:"$eq"}]),s=[{text:"Submittal ID",value:{name:"submittalID",type:"String"}},{text:"Submittal description",value:{name:"description",type:"String"}},{text:"Submittal need date",value:{name:"needDate",type:"Date"}},{text:"Submittal received date",value:{name:"receivedDate",type:"Date"}},{text:"Submittal disposition date",value:{name:"dispositionDate",type:"Date"}},{text:"Submittal owner",value:{name:"owner",type:"String"}},{text:"Violation category",value:{name:"violations.category",type:"String"}},{text:"Violation limit",value:{name:"violations.limit",type:"Number"}},{text:"Violation actual",value:{name:"violations.actual",type:"Number"}},{text:"Violation reference",value:{name:"violations.reference",type:"String"}}],r=[{text:"=",value:"$eq"},{text:">",value:"$gt"},{text:">=",value:"$gte"},{text:"<",value:"$lt"},{text:"<=",value:"$lte"},{text:"!=",value:"$ne"}],m=[{text:"=",value:"$eq"},{text:"!=",value:"$ne"}],c=R(()=>a.value.length==0||a.value[a.value.length-1].value!=""),f=()=>{c.value&&a.value.push({id:Math.random()*1e4,key:"",value:"",andOr:"and",operator:"$eq"}),console.log(JSON.stringify(a))},d=()=>{a.value=[{id:Math.random()*1e4,key:"",value:"",andOr:"and",operator:"$eq"}],i.getSubmittals()},o=P=>{a.value.splice(P,1)},D=()=>{console.log("Search: "+JSON.stringify(a.value)),i.getDynamicQuery(a.value)};return(P,y)=>{const I=$e;return p(),V("div",null,[t(H,null,{default:n(()=>[t(le,{class:"pink pt-4 pl-4 ma-0"},{default:n(()=>[t(w,{"x-large":"",color:"pink lighten-4"},{default:n(()=>y[0]||(y[0]=[b("mdi-magnify")])),_:1}),y[1]||(y[1]=b(" Submittal Query "))]),_:1}),t(fe,{class:"pa-0 ma-0"},{default:n(()=>[t(J,{fluid:""},{default:n(()=>[t(M,null,{default:n(()=>[t(_,null,{default:n(()=>[t(J,{fluid:""},{default:n(()=>[(p(!0),V(U,null,T(a.value,v=>(p(),F(M,{justify:"start",class:"pa-0 ma-0","no-gutters":"",key:v.id},{default:n(()=>[t(_,{cols:"1"},{default:n(()=>[t(ae,{modelValue:v.andOr,"onUpdate:modelValue":g=>v.andOr=g,items:["and","or"],class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(_,{cols:"1"},{default:n(()=>[v.key.type!="String"?(p(),F(ae,{key:0,modelValue:v.operator,"onUpdate:modelValue":g=>v.operator=g,"item-title":"text","item-value":"value",items:r,class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])):G("",!0),v.key.type=="String"?(p(),F(ae,{key:1,modelValue:v.operator,"onUpdate:modelValue":g=>v.operator=g,"item-title":"text","item-value":"value",items:m,class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])):G("",!0)]),_:2},1024),t(_,{cols:"2"},{default:n(()=>[t(ae,{modelValue:v.key,"onUpdate:modelValue":g=>v.key=g,label:"Search field","item-title":"text","item-value":"value",items:s,class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(_,{cols:"4"},{default:n(()=>[v.key.type!="Date"?(p(),F(ie,{key:0,modelValue:v.value,"onUpdate:modelValue":g=>v.value=g,label:"Value",class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])):G("",!0),v.key.type=="Date"?(p(),F(I,{key:1,dateProp:v.value,labelProp:"Value",iconProp:"mdi-calendar",onUpdateDate:g=>v.value=g},null,8,["dateProp","onUpdateDate"])):G("",!0)]),_:2},1024),t(_,null,{default:n(()=>[t(C,{size:"x-large",class:"pa-2 ma-2",onClick:g=>o(a.value.indexOf(v))},{default:n(()=>[t(w,null,{default:n(()=>y[2]||(y[2]=[b("mdi-minus")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),t(M,null,{default:n(()=>[t(C,{class:"ma-2",onClick:f},{default:n(()=>y[3]||(y[3]=[b("Add field")])),_:1}),Q(t(C,{class:"ma-2",color:"green-darken-2","append-icon":"mdi-magnify",onClick:D},{default:n(()=>y[4]||(y[4]=[b("Search!")])),_:1},512),[[q,c.value]])]),_:1}),t(M,null,{default:n(()=>[Q(t(C,{class:"ma-2",color:"red-darken-2","append-icon":"mdi-close-circle",onClick:d},{default:n(()=>y[5]||(y[5]=[b("Clear Search")])),_:1},512),[[q,c.value]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}},Qt=Ce(Yt,[["__scopeId","data-v-96f0a2e8"]]);var qt="[object Symbol]",et=/[\\^$.*+?()[\]{}|]/g,Zt=RegExp(et.source),Xt=typeof ce=="object"&&ce&&ce.Object===Object&&ce,en=typeof self=="object"&&self&&self.Object===Object&&self,tn=Xt||en||Function("return this")(),nn=Object.prototype,an=nn.toString,Le=tn.Symbol,Je=Le?Le.prototype:void 0,He=Je?Je.toString:void 0;function ln(e){if(typeof e=="string")return e;if(sn(e))return He?He.call(e):"";var i=e+"";return i=="0"&&1/e==-1/0?"-0":i}function on(e){return!!e&&typeof e=="object"}function sn(e){return typeof e=="symbol"||on(e)&&an.call(e)==qt}function un(e){return e==null?"":ln(e)}function rn(e){return e=un(e),e&&Zt.test(e)?e.replace(et,"\\$&"):e}var dn=rn;const K=St(dn);function mn(e,i){return typeof e=="string"?i.checkString(e):typeof e=="number"?i.checkNumber(e):!1}function _e(e,i,a,s){if(typeof e=="object")if(Array.isArray(e)){for(const r of e)if(_e(r,i,a,s))return!0}else for(const r in e){a.push(r);const m=_e(e[r],i,a,s);if(a.pop(),m)return!0}else{if(i.type==="exists")return i.key.test(a.join("."))?!!e:!1;{const r=a.join(".");for(const m of s.ignorePaths)if(m.test(r))return!1;if(s.includePaths){let m=!1;for(const c of s.includePaths)if(c.test(r)){m=!0;break}if(!m)return!1}return i.key&&!i.key.test(r)?!1:mn(e,i)}}return!1}function Ke(e,i,a,s){if(i.length){let r=!1;for(const m of i)if(_e(e,m,[],s)?!m.negate:m.negate){if(a==="OR")return!0;r=!0}else if(a==="AND")return!1;return r}return!0}function Ie(e,i){const a=[];let s=!1,r=0,m="";for(let c=0;c<e.length;c++){const f=e[c];s?f===m&&(s=!1,m=""):f==='"'||f==="'"?(s=!0,m=f):f.match(i)&&!s&&(a.push(e.slice(r,c).trim()),r=c+1),c===e.length-1&&a.push(e.slice(r).trim())}return a.map(c=>c.startsWith('"')&&c.endsWith('"')||c.startsWith("'")&&c.endsWith("'")?c.slice(1,-1):c).filter(c=>c)}const cn={"<":function(i){const a=Number(i[0]);return s=>s<a},"<=":function(i){const a=Number(i[0]);return s=>s<=a},"=":function(i){const a=i[0].split(",").filter(s=>s).map(Number);return s=>{for(let r=0;r<a.length;r++)if(s===a[r])return!0;return!1}},">=":function(i){const a=Number(i[0]);return s=>s>=a},">":function(i){const a=Number(i[0]);return s=>s>a},"..":function(i){const a=Number(i[0]),s=Number(i[1]);return r=>r>=a&&r<=s}};function ze(e){const{values:i,operator:a}=vn(e),s=cn[a];if(!s)throw new Error(`unknown operator ${a}`);return s(i)}function vn(e){const i=/^\s*\(?\s*(?<startOperator><=|>=|<|=|>|\.\.\s*)?\s*(?<firstValue>-?\d*\.?\d+)\s*(?:(?<afterDots>\.\.)\s*(?<secondValue>-?\d*\.?\d*))?\s*\)?\s*$/.exec(e);if(!i)return{operator:"=",values:[e]};if(!i.groups)throw new Error("unreachable");const{startOperator:a,firstValue:s,afterDots:r,secondValue:m}=i.groups;let c=a,f=s?[s]:[];return a===".."?c="<=":!a&&r&&!m?c=">=":r&&(c=".."),m&&f.push(m),{values:f,operator:c||"="}}const bn={"<":function(i){return a=>a<i[0]},"<=":function(i){return a=>a<=i[0]},"=":function(i,a){const s=Ie(i[0],",").filter(r=>r).map(r=>new RegExp(`^${K(r)}$`,a));return r=>{for(const m of s)if(m.test(r))return!0;return!1}},"~":function(i,a){const s=Ie(i[0],",").filter(r=>r).map(r=>new RegExp(K(r),a));return r=>{for(const m of s)if(m.test(r))return!0;return!1}},">=":function(i){return a=>a>=i[0]},">":function(i){return a=>a>i[0]},"..":function(i){return a=>a>=i[0]&&a<=i[1]}};function je(e,i){const{values:a,operator:s}=fn(e),r=bn[s];if(!r)throw new Error(`unreachable unknown operator ${s}`);return r(a,i)}function fn(e){var f;const i=e.split(".."),a=/^\s*\(?(?<operator><=|<|=|>=|>)?\s*(?<value>\S*)\s*\)?$/.exec(i[0]);if(!a)return{operator:"~",values:[e]};if(!a.groups)throw new Error("unreachable");let{operator:s,value:r}=a.groups,m=(f=i[1])==null?void 0:f.trim(),c=[r];return i.length>1&&(s="..",m?r?c.push(m):(c=[m],s="<="):s=">="),{operator:s||"~",values:c}}function pn(e,i={pathAlias:{}}){const{caseSensitive:a,pathAlias:s}=i,r=a?"":"i";let m=!1;e.startsWith("-")&&(m=!0,e=e.substring(1));const c=e.indexOf(":");if(c>-1){const f=e.substring(c+1);if(c>0){const d=e.substring(0,c);return d==="is"?{type:"exists",negate:m,key:new RegExp(`(^|\\.)${K(f)}(\\.|$)`,r)}:{type:"matches",negate:m,key:s[d]?s[d]:new RegExp(`(^|\\.)${K(d)}(\\.|$)`,r),checkNumber:ze(f),checkString:je(f,r)}}}return{type:"matches",negate:m,checkNumber:ze(e),checkString:je(e,r)}}function Cn(e,i={pathAlias:{}}){return e.map(a=>pn(a,i))}function Bn(e,i){const{insensitive:a}=i,s={};for(const[r,m]of Object.entries(e))m instanceof RegExp?s[r]=m:s[r]=new RegExp(`(^|\\.)${K(m)}(\\.|$)`,a);return s}function xe(e,i={}){let{index:a=!1,predicate:s="AND",ignorePaths:r=[],includePaths:m,pathAlias:c={}}=i;const f=i.limit?i.limit:1/0,d=i.caseSensitive?"":"i";let o=i.keywords||[];const D=Bn(c,{insensitive:d}),P=r.map(g=>typeof g=="string"?new RegExp(`(^|\\.)${K(g)}(\\.|$)`,d):g),y=m?m.map(g=>typeof g=="string"?new RegExp(`(^|\\.)${K(g)}(\\.|$)`,d):g):void 0;typeof o=="string"&&(o=Ie(o,/[ \t\r\n]/));const I=Cn(o,{caseSensitive:i.caseSensitive,pathAlias:D});let v=0;if(a){const g=[];for(let $=0;$<e.length&&v<f;$++)Ke(e[$],I,s,{ignorePaths:P,includePaths:y})&&(v=g.push($));return g}else{const g=[];for(let $=0;$<e.length&&v<f;$++)Ke(e[$],I,s,{ignorePaths:P,includePaths:y})&&(v=g.push(e[$]));return g}}const gn=Ne({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function yn(e,i){const a=e.returnObject?i:Ue(i,e.itemValue),s=Ue(i,e.itemSelectable,!0);return{type:"item",value:a,selectable:s,raw:i}}function Dn(e,i){const a=[];for(const s of i)a.push(yn(e,s));return a}function An(e){return{items:R(()=>Dn(e,e.items))}}const kn=Ne({search:String,loading:Boolean,...Ze(),...gn(),...Dt(),...yt(),...gt({itemsPerPage:5}),...Bt(),...Ct(),...pt(),...qe(),...xt({transition:{component:Et,hideOnLeave:!0}})},"VDataIterator"),Sn=Re()({name:"VDataIterator",props:kn(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,i){let{slots:a}=i;const s=ht(e,"groupBy"),r=Te(()=>e.search),{items:m}=An(e),{filteredItems:c}=it(e,m,r,{transform:l=>l.raw}),{sortBy:f,multiSort:d,mustSort:o}=lt(e),{page:D,itemsPerPage:P}=ot(e),{toggleSort:y}=ft({sortBy:f,multiSort:d,mustSort:o,page:D}),{sortByWithGroups:I,opened:v,extractRows:g,isGroupOpen:$,toggleGroup:Be}=st({groupBy:s,sortBy:f}),{sortedItems:ge}=ut(e,c,I,{transform:l=>l.raw}),{flatItems:oe}=rt(ge,s,v),ye=Te(()=>oe.value.length),{startIndex:Z,stopIndex:se,pageCount:L,prevPage:De,nextPage:Ae,setItemsPerPage:ke,setPage:Se}=dt({page:D,itemsPerPage:P,itemsLength:ye}),{paginatedItems:X}=mt({items:oe,startIndex:Z,stopIndex:se,itemsPerPage:P}),ee=R(()=>g(X.value)),{isSelected:z,select:te,selectAll:ue,toggleSelect:j}=ct(e,{allItems:m,currentPage:ee}),{isExpanded:re,toggleExpand:he}=vt(e);bt({page:D,itemsPerPage:P,sortBy:f,groupBy:s,search:r});const B=R(()=>({page:D.value,itemsPerPage:P.value,sortBy:f.value,pageCount:L.value,toggleSort:y,prevPage:De,nextPage:Ae,setPage:Se,setItemsPerPage:ke,isSelected:z,select:te,selectAll:ue,toggleSelect:j,isExpanded:re,toggleExpand:he,isGroupOpen:$,toggleGroup:Be,items:ee.value,groupedItems:X.value}));return Vt(()=>t(e.tag,{class:Y(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Qe(e.style)},{default:()=>{var l,k;return[(l=a.header)==null?void 0:l.call(a,B.value),t(Ft,{transition:e.transition},{default:()=>{var S,x;return[e.loading?t(Pt,{key:"loader",name:"v-data-iterator",active:!0},{default:Ve=>{var de;return(de=a.loader)==null?void 0:de.call(a,Ve)}}):O("div",{key:"items"},[X.value.length?(x=a.default)==null?void 0:x.call(a,B.value):(S=a["no-data"])==null?void 0:S.call(a)])]}}),(k=a.footer)==null?void 0:k.call(a,B.value)]}})),{}}}),tt=Symbol.for("vuetify:v-item-group"),hn=Ne({...Ze(),...$t({selectedClass:"v-item--selected"}),...qe(),...It()},"VItemGroup"),Vn=Re()({name:"VItemGroup",props:hn(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:a}=i;const{themeClasses:s}=wt(e),{isSelected:r,select:m,next:c,prev:f,selected:d}=_t(e,tt);return()=>t(e.tag,{class:Y(["v-item-group",s.value,e.class]),style:Qe(e.style)},{default:()=>{var o;return[(o=a.default)==null?void 0:o.call(a,{isSelected:r,select:m,next:c,prev:f,selected:d.value})]}})}}),Fn=Re()({name:"VItem",props:Ot(),emits:{"group:selected":e=>!0},setup(e,i){let{slots:a}=i;const{isSelected:s,select:r,toggle:m,selectedClass:c,value:f,disabled:d}=Mt(e,tt);return()=>{var o;return(o=a.default)==null?void 0:o.call(a,{isSelected:s.value,selectedClass:c.value,select:r,toggle:m,value:f.value,disabled:d.value})}}}),Pn={class:"pa-1"},xn={class:"pa-1"},En={class:"d-flex"},wn={class:"pa-1"},_n={class:"pa-1"},In={class:"pa-1"},$n={class:"mr-4 grey--text"},On=["colspan"],Mn={style:{"user-select":"none"}},Nn={__name:"SubmittalsComponent",setup(e){const i=Me(),a=Oe(),s=Nt(),r=h(null),m=h([new Date]),c=[5,10,20,100],f=h(""),d=h([]),o=h({peerReviewNeeded:null,nrInformed:null,owner:[],open:null}),D=h(["A","B","C","D"]),P=h(!1),y=h(1),I=h(10),v=[{key:h("submittalID"),order:"asc"}],g=[{text:"Submittal ID",value:"submittalID"},{text:"Need Date",value:"needDate"},{text:"Owner",value:"owner"}],$=h([]);h(!1);const Be=B=>B.length<=200||"Input too long!";h({});const ge=[{title:"Submittal",align:"start",key:"submittalID",width:"180px"},{title:"Description",key:"description",width:"40%"},{title:"Received Date",key:"receivedDate",width:"205px"},{title:"Need Date",key:"needDate",width:"205px"},{title:"Disposition Date",key:"dispositionDate",width:"205px"},{title:"Priority",key:"priority"},{title:"Owner",key:"owner"},{title:"",key:"save",width:"1px",sortable:!1},{title:"",key:"data-table-expand",width:"1px"}],oe=["AA","BB","FF","DD","EE","CC"],ye=[{name:"Shirley Clemas",unit:"BB",subdivision:"BBB"},{name:"Aubrey Meenehan",unit:"FF"},{name:"Nikolia Dulson",unit:"AA",subdivision:"AAA"},{name:"Claretta Enns",unit:"DD",subdivision:"CCC"},{name:"Ninnetta Kamiyama",unit:"AA",subdivision:"AAA"},{name:"Brenna Pettet",unit:"DD",subdivision:"CCC"},{name:"Clementina Burnham",unit:"BB",subdivision:"BBB"},{name:"Shara Willeson",unit:"DD",subdivision:"CCC"},{name:"Salome Bernardo",unit:"DD",subdivision:"CCC"},{name:"Conrade Dines",unit:"DD",subdivision:"CCC"},{name:"Marillin Foister",unit:"EE",subdivision:"CCC"},{name:"Maggee Silvester",unit:"FF"},{name:"Chery Barhims",unit:"DD",subdivision:"CCC"},{name:"Spence Grishinov",unit:"CC",subdivision:"BBB"},{name:"Dulciana Saberton",unit:"AA",subdivision:"AAA"},{name:"Valina Cleaver",unit:"FF"},{name:"Kenna Hadgkiss",unit:"AA",subdivision:"AAA"},{name:"Shay Rennie",unit:"FF"},{name:"Colin Van der Beek",unit:"EE",subdivision:"CCC"},{name:"Westbrook Rumens",unit:"CC",subdivision:"BBB"},{name:"Renee Schwanden",unit:"FF"},{name:"Euphemia Ciraldo",unit:"EE",subdivision:"CCC"},{name:"Michel Mewett",unit:"FF"},{name:"Aymer Aland",unit:"FF"},{name:"Dennison Corbould",unit:"EE",subdivision:"CCC"},{name:"Christoffer Kryska",unit:"BB",subdivision:"BBB"},{name:"Odo Dykins",unit:"CC",subdivision:"BBB"},{name:"Maurizio Wrates",unit:"DD",subdivision:"CCC"},{name:"Leia Swinburn",unit:"BB",subdivision:"BBB"},{name:"Noam Ewbanck",unit:"DD",subdivision:"CCC"},{name:"Carmine Stuther",unit:"CC",subdivision:"BBB"},{name:"Caesar Jeppensen",unit:"CC",subdivision:"BBB"},{name:"Phillipe Huckle",unit:"CC",subdivision:"BBB"},{name:"Edi Rentelll",unit:"CC",subdivision:"BBB"},{name:"Audi Moughtin",unit:"EE",subdivision:"CCC"},{name:"Gwenora Peascod",unit:"AA",subdivision:"AAA"},{name:"Rockey Colam",unit:"EE",subdivision:"CCC"},{name:"Margie Truggian",unit:"AA",subdivision:"AAA"},{name:"Frederica Siney",unit:"FF"},{name:"Cary Lindwasser",unit:"DD",subdivision:"CCC"},{name:"Robinet Pettiward",unit:"DD",subdivision:"CCC"},{name:"Durand Godspede",unit:"AA",subdivision:"AAA"},{name:"Tommie Dunmuir",unit:"DD",subdivision:"CCC"},{name:"Raimundo Rylatt",unit:"EE",subdivision:"CCC"},{name:"Verney McKechnie",unit:"AA",subdivision:"AAA"},{name:"Ray Binding",unit:"BB",subdivision:"BBB"},{name:"Valery Vedishchev",unit:"FF"},{name:"Trevar Faber",unit:"AA",subdivision:"AAA"},{name:"Allyce O'Giany",unit:"DD",subdivision:"CCC"},{name:"Armstrong Androlli",unit:"FF"},{name:"Kingsly Clymo",unit:"EE",subdivision:"CCC"},{name:"Chris Simister",unit:"CC",subdivision:"BBB"},{name:"Sloan Breagan",unit:"FF"},{name:"Valentina Alston",unit:"CC",subdivision:"BBB"},{name:"Shae Hadfield",unit:"FF"},{name:"Gardie Latta",unit:"CC",subdivision:"BBB"},{name:"Kermit Odney",unit:"BB",subdivision:"BBB"},{name:"Vina Cowpertwait",unit:"BB",subdivision:"BBB"},{name:"Tirrell Nanninini",unit:"BB",subdivision:"BBB"},{name:"Taylor Bench",unit:"FF"},{name:"Cornela Philson",unit:"AA",subdivision:"AAA"},{name:"Rutger Vesque",unit:"CC",subdivision:"BBB"},{name:"Deane Mityakov",unit:"CC",subdivision:"BBB"},{name:"Alexander Bradwell",unit:"EE",subdivision:"CCC"},{name:"Padget Alsobrook",unit:"EE",subdivision:"CCC"},{name:"Gaynor Steart",unit:"EE",subdivision:"CCC"},{name:"Findley Laba",unit:"CC",subdivision:"BBB"},{name:"Benedikt Gothliff",unit:"CC",subdivision:"BBB"},{name:"Fernandina Alcoran",unit:"CC",subdivision:"BBB"},{name:"Stearn Cahalan",unit:"DD",subdivision:"CCC"},{name:"Felicio Rubinfeld",unit:"BB",subdivision:"BBB"},{name:"Remus Alderson",unit:"FF"},{name:"Carrol Kohen",unit:"CC",subdivision:"BBB"},{name:"Jud McParland",unit:"DD",subdivision:"CCC"},{name:"Moore Casetta",unit:"DD",subdivision:"CCC"},{name:"Aileen Cartner",unit:"EE",subdivision:"CCC"},{name:"Lisbeth Melledy",unit:"CC",subdivision:"BBB"},{name:"Andra Kubiak",unit:"EE",subdivision:"CCC"},{name:"Tony Aggs",unit:"CC",subdivision:"BBB"},{name:"Erma Pennycock",unit:"CC",subdivision:"BBB"},{name:"Ailis Sutterby",unit:"CC",subdivision:"BBB"},{name:"Krissy Hayhoe",unit:"DD",subdivision:"CCC"},{name:"Cecil Jarmain",unit:"BB",subdivision:"BBB"},{name:"Datha Gooda",unit:"BB",subdivision:"BBB"},{name:"Donna Dukes",unit:"CC",subdivision:"BBB"},{name:"Cyril Gulc",unit:"CC",subdivision:"BBB"},{name:"Joice Hrynczyk",unit:"BB",subdivision:"BBB"},{name:"Jessie Vogl",unit:"FF"},{name:"Bary Lethbrig",unit:"AA",subdivision:"AAA"},{name:"Nelle Groucock",unit:"BB",subdivision:"BBB"},{name:"Winne Cowthard",unit:"CC",subdivision:"BBB"},{name:"Woodie Beckmann",unit:"AA",subdivision:"AAA"},{name:"Ker Bugg",unit:"CC",subdivision:"BBB"},{name:"Newton Biddlestone",unit:"DD",subdivision:"CCC"},{name:"Emily Bernadot",unit:"DD",subdivision:"CCC"},{name:"Walt Girault",unit:"FF"},{name:"Karole Vlasenkov",unit:"AA",subdivision:"AAA"},{name:"Matt Postans",unit:"DD",subdivision:"CCC"},{name:"Chickie Gisbey",unit:"BB",subdivision:"BBB"},{name:"Mason Roobottom",unit:"DD",subdivision:"CCC"},{name:"Bradan Karle",unit:"FF"},{name:"Paulette Suter",unit:"AA",subdivision:"AAA"},{name:"Riobard Roj",unit:"DD",subdivision:"CCC"},{name:"Fae Farlowe",unit:"BB",subdivision:"BBB"},{name:"Geoffrey Kemmett",unit:"EE",subdivision:"CCC"},{name:"Cristine Littlepage",unit:"AA",subdivision:"AAA"},{name:"Hollyanne Takkos",unit:"DD",subdivision:"CCC"},{name:"Glenden Hulcoop",unit:"BB",subdivision:"BBB"},{name:"Kenon Vasyushkhin",unit:"FF"},{name:"Konstance Georgiades",unit:"DD",subdivision:"CCC"},{name:"Karly Humbles",unit:"EE",subdivision:"CCC"},{name:"Joane Marfield",unit:"BB",subdivision:"BBB"},{name:"Fannie Hens",unit:"BB",subdivision:"BBB"},{name:"Fred Padwick",unit:"EE",subdivision:"CCC"},{name:"Riki Laughtisse",unit:"FF"},{name:"Crissy Craw",unit:"FF"},{name:"Nessy Streets",unit:"FF"},{name:"Bartel Catterill",unit:"AA",subdivision:"AAA"},{name:"Aldin Pentony",unit:"EE",subdivision:"CCC"},{name:"Amandy Lorentzen",unit:"DD",subdivision:"CCC"},{name:"Trisha Antoinet",unit:"DD",subdivision:"CCC"},{name:"Gustavo Liley",unit:"DD",subdivision:"CCC"},{name:"Thornie Maly",unit:"DD",subdivision:"CCC"},{name:"Eleni Gutowski",unit:"FF"},{name:"Marcelle Hyam",unit:"EE",subdivision:"CCC"},{name:"Lynna MacNockater",unit:"CC",subdivision:"BBB"},{name:"Othilie Vergo",unit:"CC",subdivision:"BBB"},{name:"Javier Sikorski",unit:"FF"},{name:"Corbet Camber",unit:"FF"},{name:"Marylee Sneath",unit:"DD",subdivision:"CCC"},{name:"Walker Ost",unit:"EE",subdivision:"CCC"},{name:"Aleen Gorman",unit:"BB",subdivision:"BBB"},{name:"Pembroke Kleinzweig",unit:"FF"},{name:"Lavinia Thaxter",unit:"DD",subdivision:"CCC"},{name:"Bette-ann Pepys",unit:"DD",subdivision:"CCC"},{name:"Sharai MacVean",unit:"AA",subdivision:"AAA"},{name:"Natal Tilmouth",unit:"DD",subdivision:"CCC"},{name:"Harrietta Hentzer",unit:"FF"},{name:"Derward Blackaller",unit:"AA",subdivision:"AAA"},{name:"Caspar Driuzzi",unit:"CC",subdivision:"BBB"},{name:"Angeline Nannizzi",unit:"CC",subdivision:"BBB"},{name:"Mauricio Blackley",unit:"FF"},{name:"Jessi Tramel",unit:"EE",subdivision:"CCC"},{name:"Gilligan Butterley",unit:"BB",subdivision:"BBB"},{name:"Earvin Ellingford",unit:"BB",subdivision:"BBB"},{name:"Jeanine Moyce",unit:"DD",subdivision:"CCC"},{name:"Jessie Arangy",unit:"EE",subdivision:"CCC"},{name:"Morley Goady",unit:"AA",subdivision:"AAA"},{name:"Michal Hucks",unit:"BB",subdivision:"BBB"},{name:"Augusto Husthwaite",unit:"AA",subdivision:"AAA"},{name:"Teddy Punt",unit:"BB",subdivision:"BBB"},{name:"Brenden Stockney",unit:"BB",subdivision:"BBB"},{name:"Agathe Smitheram",unit:"FF"},{name:"Robbyn Morrid",unit:"CC",subdivision:"BBB"},{name:"Sheeree Berresford",unit:"CC",subdivision:"BBB"},{name:"Mimi Wallentin",unit:"FF"},{name:"Doralynne Konerding",unit:"BB",subdivision:"BBB"},{name:"Kipper Kegan",unit:"FF"},{name:"Drusilla Hassin",unit:"DD",subdivision:"CCC"},{name:"Lindon Hearne",unit:"DD",subdivision:"CCC"},{name:"Cory Hanna",unit:"EE",subdivision:"CCC"},{name:"Nussy Streets",unit:"DD",subdivision:"CCC"},{name:"Stefano O' Cuolahan",unit:"DD",subdivision:"CCC"},{name:"Sebastiano Janes",unit:"FF"},{name:"Johanna Lilloe",unit:"BB",subdivision:"BBB"},{name:"Walsh Binestead",unit:"CC",subdivision:"BBB"},{name:"Marcel Beatson",unit:"AA",subdivision:"AAA"},{name:"Eduardo Olenchikov",unit:"DD",subdivision:"CCC"},{name:"Tremain Polak",unit:"EE",subdivision:"CCC"},{name:"Barb Sheach",unit:"BB",subdivision:"BBB"},{name:"Constantina Oganesian",unit:"BB",subdivision:"BBB"},{name:"Wynn Gorgen",unit:"EE",subdivision:"CCC"},{name:"Ulysses Harmar",unit:"BB",subdivision:"BBB"},{name:"Tiffy Pitkeathley",unit:"FF"},{name:"Mathilda Mc Cahey",unit:"BB",subdivision:"BBB"},{name:"Benedicto Durn",unit:"AA",subdivision:"AAA"},{name:"Minna Bartczak",unit:"FF"},{name:"Evangeline Stoak",unit:"AA",subdivision:"AAA"},{name:"Germayne Wannop",unit:"EE",subdivision:"CCC"},{name:"Monty Ivie",unit:"DD",subdivision:"CCC"},{name:"Myrtie Swait",unit:"CC",subdivision:"BBB"},{name:"Susanne Hargreaves",unit:"CC",subdivision:"BBB"},{name:"Maura Burhill",unit:"FF"},{name:"Lora Woodford",unit:"EE",subdivision:"CCC"},{name:"Floyd Salvage",unit:"DD",subdivision:"CCC"},{name:"Claudian Martinot",unit:"BB",subdivision:"BBB"},{name:"Dedie Blumer",unit:"AA",subdivision:"AAA"},{name:"Daloris Roskell",unit:"FF"},{name:"Nerty Harmant",unit:"AA",subdivision:"AAA"},{name:"Celinda Lowensohn",unit:"FF"},{name:"Glenn Bearns",unit:"EE",subdivision:"CCC"},{name:"Gwenora Candey",unit:"CC",subdivision:"BBB"},{name:"Waldo Locke",unit:"DD",subdivision:"CCC"},{name:"Kendell Drable",unit:"FF"},{name:"Marchelle Clewer",unit:"CC",subdivision:"BBB"},{name:"Richmound Vinick",unit:"DD",subdivision:"CCC"},{name:"Corbin Milne",unit:"AA",subdivision:"AAA"},{name:"Georgina Cadagan",unit:"DD",subdivision:"CCC"},{name:"Tripp Kingdom",unit:"AA",subdivision:"AAA"},{name:"Ramon D'Souza",unit:"FF"},{name:"Hettie Gluyas",unit:"AA",subdivision:"AAA"},{name:"Valentina Sandle",unit:"EE",subdivision:"CCC"},{name:"Marchelle Haker",unit:"CC",subdivision:"BBB"},{name:"Harlene Lynnett",unit:"FF"},{name:"Joaquin Plumtree",unit:"BB",subdivision:"BBB"},{name:"Carilyn Yate",unit:"EE",subdivision:"CCC"},{name:"Alberta Beswetherick",unit:"EE",subdivision:"CCC"},{name:"Lawry Eyckelbeck",unit:"BB",subdivision:"BBB"},{name:"Kathie Latliff",unit:"FF"},{name:"Batholomew Huyge",unit:"CC",subdivision:"BBB"},{name:"Lucias Graeser",unit:"AA",subdivision:"AAA"},{name:"Herman Levay",unit:"FF"},{name:"Sibel Peterffy",unit:"AA",subdivision:"AAA"},{name:"Urban Lars",unit:"FF"},{name:"Annmaria Ferenczy",unit:"DD",subdivision:"CCC"},{name:"Grethel Sage",unit:"FF"},{name:"Emerson Elsdon",unit:"BB",subdivision:"BBB"},{name:"Melany Noddles",unit:"AA",subdivision:"AAA"},{name:"Angelique Bethell",unit:"FF"},{name:"Tani Yoskowitz",unit:"BB",subdivision:"BBB"},{name:"Clive Sartain",unit:"AA",subdivision:"AAA"},{name:"Cristin Yurkin",unit:"FF"},{name:"Maurie Birkmyre",unit:"AA",subdivision:"AAA"},{name:"Martie Marrows",unit:"EE",subdivision:"CCC"},{name:"Josephine Riddell",unit:"DD",subdivision:"CCC"},{name:"Catherin Brockton",unit:"EE",subdivision:"CCC"},{name:"Marthena Brierley",unit:"EE",subdivision:"CCC"},{name:"Lorianne MacDermand",unit:"BB",subdivision:"BBB"},{name:"Aloin Tisor",unit:"BB",subdivision:"BBB"},{name:"Kennett Ducker",unit:"CC",subdivision:"BBB"},{name:"Zach Baiss",unit:"FF"},{name:"Ronica Sivess",unit:"AA",subdivision:"AAA"},{name:"Concettina Syalvester",unit:"AA",subdivision:"AAA"},{name:"Iorgos Jovanovic",unit:"BB",subdivision:"BBB"},{name:"Susana Dowsey",unit:"BB",subdivision:"BBB"},{name:"Jeromy Yakunikov",unit:"FF"},{name:"Vonny Callendar",unit:"BB",subdivision:"BBB"},{name:"Bill Huggons",unit:"BB",subdivision:"BBB"},{name:"Dacie Klimowicz",unit:"CC",subdivision:"BBB"},{name:"Joline Butt",unit:"FF"}],Z=h({}),se=h(null),L=h(!1),De=B=>{i.updateSubmittal(B)},Ae=()=>{y.value+1<=te.value&&(y.value+=1)},ke=()=>{y.value-1>=1&&(y.value-=1)},Se=B=>{I.value=B},X=({nativeEvent:B,event:l})=>{const k=()=>{Z.value=l,se.value=B.target,requestAnimationFrame(()=>requestAnimationFrame(()=>L.value=!0))};L.value?(L.value=!1,requestAnimationFrame(()=>requestAnimationFrame(()=>k()))):k(),B.stopPropagation()},ee=B=>JSON.stringify(B)==="{}"?"":z(B.submittal),z=(B,l)=>{const S=ne(B).diff(ne(),"day");var x;return S<0?x="red-darken-1":S<7?x="deep-orange-darken-1":S<14?x="orange-darken-1":S<21?x="amber-darken-1":S<28?x="light-green-darken-1":x="green-darken-1",l!=null&&(x="grey-darken-2"),x},te=R(()=>Math.ceil(j.value.length/I.value)),ue=R(()=>{console.log("projects:"+JSON.stringify(a.projects));var B=a.projects.filter(function(k){return D.value.includes(k.name)}),l=[];return B.forEach(k=>{k.contracts.forEach(S=>{!l.includes(S.contractID)&&l.push(S.contractID)})}),l}),j=R(()=>{var B=[];return ue.value.forEach(l=>{B.push.apply(B,xe(i.submittals,{keywords:`submittalID:-${l}-`}))}),console.log(`Contracts filter: ${JSON.stringify(ue.value)}`),Object.entries(o.value).forEach(l=>{const[k,S]=l;S!=null&&(Array.isArray(S)?(B=xe(B,{keywords:`${S.length>0?k+":":""}${JSON.stringify(S).replace("[","").replace("]","")}`,predicate:"OR"}),console.log(`${S.length>0?k+":":""}${JSON.stringify(S).replace("[","").replace("]","")}`)):B=B.filter(x=>x[k]===S))}),console.log("Filtered submittals:"),console.log(B),B}),re=R(()=>xe(ye,{keywords:`unit:${d.value}`,predicate:"OR"})),he=R(()=>{const B=j.value.map(l=>{const k={};return k.name=`${l.submittalID} ${l.description!=""?"-":""} ${l.description}`,k.start=ne(l.receivedDate).format("YYYY-MM-DD"),k.end=ne(l.needDate).format("YYYY-MM-DD"),k.submittal=l,k});return Ge.sortBy(B,["name","start","end"])});return(B,l)=>{const k=Qt,S=Wt,x=$e,Ve=Xe,de=We,nt=Ye,at=Rt("v-calendar");return p(),V("div",null,[Q(t(k,null,null,512),[[q,N(s).submittalSearch]]),t(J,{fluid:""},{default:n(()=>[t(M,null,{default:n(()=>[t(_,null,{default:n(()=>[N(s).submittalView==="cards"?(p(),F(we,{key:0,dark:"",color:"purple-darken-2",class:"mb-0 d-flex justify-start"},{default:n(()=>[t(ie,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=u=>f.value=u),clearable:"",flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Filter",class:"pr-1"},null,8,["modelValue"]),O("template",null,[t(be),t(ae,{modelValue:v,"onUpdate:modelValue":l[1]||(l[1]=u=>v=u),flat:"","solo-inverted":"","hide-details":"",items:g,"prepend-inner-icon":"mdi-sort",label:"Sort by"}),t(be),t(W,{modelValue:P.value,"onUpdate:modelValue":l[2]||(l[2]=u=>P.value=u),mandatory:""},{default:n(()=>[t(C,{large:"",depressed:"",color:"blue",value:!1},{default:n(()=>[t(w,null,{default:n(()=>l[18]||(l[18]=[b("mdi-arrow-up")])),_:1})]),_:1}),t(C,{large:"",depressed:"",color:"blue",value:!0},{default:n(()=>[t(w,null,{default:n(()=>l[19]||(l[19]=[b("mdi-arrow-down")])),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})):G("",!0),t(ve,{color:"purple-darken-2",class:"d-flex flex-wrap justify-start pa-2 mb-1",style:{width:"100%"}},{default:n(()=>[O("div",Pn,[t(W,{modelValue:D.value,"onUpdate:modelValue":l[3]||(l[3]=u=>D.value=u),dense:"","background-color":"primary",dark:"",multiple:""},{default:n(()=>[(p(!0),V(U,null,T(N(Ge).sortBy(N(a).projects,["name"]),u=>(p(),F(C,{color:"purple",key:u.name,value:u.name},{default:n(()=>[b(E(u.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(C,{dense:"",color:"red darken-3",onClick:l[4]||(l[4]=()=>D.value=["A","B","C","D"])},{default:n(()=>l[20]||(l[20]=[b(" All ")])),_:1}),t(C,{dense:"",color:"red darken-3",onClick:l[5]||(l[5]=()=>D.value=[])},{default:n(()=>l[21]||(l[21]=[b(" None ")])),_:1})]),O("div",xn,[t(J,null,{default:n(()=>[t(M,null,{default:n(()=>[t(W,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=u=>d.value=u),multiple:"",dense:"","background-color":"primary",dark:""},{default:n(()=>[(p(!0),V(U,null,T(oe.sort(),u=>(p(),F(C,{color:"yellow darken-3",key:u,value:u},{default:n(()=>[b(E(u),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),Q(t(C,{dense:"",color:"red darken-3",onClick:l[7]||(l[7]=()=>o.value.owner=re.value.map(u=>u.name))},{default:n(()=>l[22]||(l[22]=[b(" All ")])),_:1},512),[[q,d.value!=""]]),Q(t(C,{dense:"",color:"red darken-3",onClick:l[8]||(l[8]=()=>o.value.owner=[])},{default:n(()=>l[23]||(l[23]=[b(" None ")])),_:1},512),[[q,d.value!=""]])]),_:1}),t(M,{class:"d-inline-flex flex-wrap"},{default:n(()=>[t(Vn,{modelValue:o.value.owner,"onUpdate:modelValue":l[9]||(l[9]=u=>o.value.owner=u),dense:"","background-color":"primary",multiple:"",dark:""},{default:n(()=>[(p(!0),V(U,null,T(re.value.sort(function(u,A){return u.name.substring(u.name.indexOf(" ")+1).localeCompare(A.name.substring(A.name.indexOf(" ")+1))}),u=>(p(),F(Fn,{key:u.name,value:u.name},{default:n(({toggle:A})=>[t(C,{color:"grey-darken-3",class:"pa-1 ma-1 text-capitalize","active-color":"green",active:o.value.owner.includes(u.name),small:"",onClick:A},{default:n(()=>[b(E(u.name.substring(u.name.indexOf(" ")+1)),1)]),_:2},1032,["active","onClick"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),O("div",En,[O("div",wn,[t(W,{dense:"","background-color":"primary",exclusive:"",modelValue:o.value.peerReviewNeeded,"onUpdate:modelValue":l[10]||(l[10]=u=>o.value.peerReviewNeeded=u)},{default:n(()=>[t(C,{dense:"",color:"red darken-3",value:!0},{default:n(()=>l[24]||(l[24]=[b(" Peer Needed ")])),_:1}),t(C,{dense:"",color:"red darken-3",value:!1},{default:n(()=>l[25]||(l[25]=[b(" Peer Assigned ")])),_:1})]),_:1},8,["modelValue"])]),O("div",_n,[t(W,{dense:"","background-color":"primary",exclusive:"",modelValue:o.value.nrInformed,"onUpdate:modelValue":l[11]||(l[11]=u=>o.value.nrInformed=u)},{default:n(()=>[t(C,{dense:"",color:"blue darken-3",value:!0},{default:n(()=>l[26]||(l[26]=[b(" NR Informed ")])),_:1}),t(C,{dense:"",color:"blue darken-3",value:!1},{default:n(()=>l[27]||(l[27]=[b(" NR Uninformed ")])),_:1})]),_:1},8,["modelValue"])]),O("div",In,[t(W,{dense:"","background-color":"primary",exclusive:"",modelValue:o.value.open,"onUpdate:modelValue":l[12]||(l[12]=u=>o.value.open=u)},{default:n(()=>[t(C,{dense:"",color:"orange darken-3",value:!0},{default:n(()=>l[28]||(l[28]=[b(" Open ")])),_:1}),t(C,{dense:"",color:"orange darken-3",value:!1},{default:n(()=>l[29]||(l[29]=[b(" Closed ")])),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),t(M,null,{default:n(()=>[t(_,{cols:"12"},{default:n(()=>[N(s).submittalView==="cards"?(p(),F(Sn,{key:0,items:j.value,"item-key":"_id","items-per-page":I.value,page:y.value,search:f.value,"sort-by":v,"sort-desc":P.value,"hide-default-footer":""},{default:n(({items:u})=>[t(M,null,{default:n(()=>[(p(!0),V(U,null,T(u,A=>(p(),F(_,{key:A._id,cols:"12",sm:"6",md:"4",lg:"3"},{default:n(()=>[t(S,{submittal:A.raw,color:z(A.raw.needDate,A.raw.dispositionDate)},null,8,["submittal","color"])]),_:2},1024))),128))]),_:2},1024)]),footer:n(()=>[t(M,{class:"mt-2",align:"center",justify:"center"},{default:n(()=>[l[33]||(l[33]=O("span",{class:"grey--text"},"Submittals per page",-1)),t(pe,{"offset-y":""},{activator:n(({props:u})=>[t(C,Ee({dark:"",text:"",color:"primary",class:"ml-2"},u),{default:n(()=>[b(E(I.value)+" ",1),t(w,null,{default:n(()=>l[30]||(l[30]=[b("mdi-chevron-down")])),_:1})]),_:2},1040)]),default:n(()=>[t(Ut,null,{default:n(()=>[(p(),V(U,null,T(c,(u,A)=>t(Tt,{key:A,onClick:Un=>Se(u)},{default:n(()=>[t(Gt,null,{default:n(()=>[b(E(u),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1}),t(be),O("span",$n," Page "+E(y.value)+" of "+E(te.value===0?1:te.value),1),t(C,{fab:"",dark:"",color:"blue darken-3",class:"mr-1",onClick:ke},{default:n(()=>[t(w,null,{default:n(()=>l[31]||(l[31]=[b("mdi-chevron-left")])),_:1})]),_:1}),t(C,{fab:"",dark:"",color:"blue darken-3",class:"ml-1",onClick:Ae},{default:n(()=>[t(w,null,{default:n(()=>l[32]||(l[32]=[b("mdi-chevron-right")])),_:1})]),_:1})]),_:1})]),_:1},8,["items","items-per-page","page","search","sort-desc"])):G("",!0)]),_:1})]),_:1})]),_:1}),N(s).submittalView==="table"?(p(),F(J,{key:0,fluid:"",class:"py-0 my-0"},{default:n(()=>[t(At,{headers:ge,items:j.value,"item-key":"submittalID","sort-by":["submittalID","owner"],"sort-desc":[!1,!0],"multi-sort":"","show-expand":"",expanded:$.value,"onUpdate:expanded":l[13]||(l[13]=u=>$.value=u)},{"item.submittalID":n(({item:u})=>[t(ve,{color:z(u.needDate,u.dispositionDate),rounded:"",class:"d-flex justify-center pa-1 ma-0"},{default:n(()=>[b(E(u.submittalID),1)]),_:2},1032,["color"])]),"item.description":n(u=>[t(ie,{modelValue:u.item.description,"onUpdate:modelValue":A=>u.item.description=A,compact:"",variant:"plain",rules:[Be],label:"Edit","single-line":"",counter:""},null,8,["modelValue","onUpdate:modelValue","rules"])]),"item.receivedDate":n(({item:u})=>[t(x,{dateProp:u.receivedDate,iconProp:"mdi-calendar-today",onUpdateDate:A=>u.receivedDate=A},null,8,["dateProp","onUpdateDate"])]),"item.needDate":n(({item:u})=>[t(x,{dateProp:u.needDate,iconProp:"mdi-calendar-clock",onUpdateDate:A=>u.needDate=A},null,8,["dateProp","onUpdateDate"])]),"item.dispositionDate":n(({item:u})=>[t(x,{dateProp:u.dispositionDate,iconProp:"mdi-calendar-check",onUpdateDate:A=>u.dispositionDate=A},null,8,["dateProp","onUpdateDate"])]),"item.priority":n(({item:u})=>[t(Ve,{submittalProp:u,color:z(u.needDate,u.dispositionDate)},null,8,["submittalProp","color"])]),"item.save":n(({item:u})=>[t(C,{icon:"",onClick:A=>De(u)},{default:n(()=>[t(w,null,{default:n(()=>l[34]||(l[34]=[b("mdi-content-save-edit")])),_:1})]),_:2},1032,["onClick"])]),"expanded-row":n(({columns:u,item:A})=>[O("td",{colspan:u.length,class:"pa-0 ma-0"},[t(le,{class:"pa-2"},{default:n(()=>l[35]||(l[35]=[b("Stakeholders")])),_:1}),t(de,{stakeholders:A.stakeholders,view:"table"},null,8,["stakeholders"]),t(le,{class:"pa-2"},{default:n(()=>l[36]||(l[36]=[b("Violations")])),_:1}),t(nt,{violations:A.violations},null,8,["violations"])],8,On)]),_:2},1032,["items","expanded"])]),_:1})):G("",!0),N(s).submittalView==="calendar"?(p(),F(J,{key:1,fluid:"",class:"py-0 my-0"},{default:n(()=>[O("template",null,[t(M,{class:"fill-height"},{default:n(()=>[t(_,null,{default:n(()=>[t(ve,{height:"64"},{default:n(()=>[t(we,{flat:""},{default:n(()=>[t(C,{fab:"",text:"",small:"",color:"grey darken-2",onClick:l[14]||(l[14]=u=>r.value.prev())},{default:n(()=>[t(w,null,{default:n(()=>l[37]||(l[37]=[b(" mdi-chevron-left ")])),_:1})]),_:1}),O("h1",Mn,E(N(ne)(m.value).format("MMMM YYYY")),1),t(C,{fab:"",text:"",small:"",color:"grey darken-2",onClick:l[15]||(l[15]=u=>r.value.next())},{default:n(()=>[t(w,null,{default:n(()=>l[38]||(l[38]=[b(" mdi-chevron-right ")])),_:1})]),_:1})]),_:1})]),_:1}),t(ve,null,{default:n(()=>[t(at,{ref_key:"calendar",ref:r,modelValue:m.value,"onUpdate:modelValue":l[16]||(l[16]=u=>m.value=u),color:"primary",type:"month","show-month-on-first":!1,events:he.value,"event-more":!1,"event-color":ee,"onClick:event":X},null,8,["modelValue","events"]),t(pe,{modelValue:L.value,"onUpdate:modelValue":l[17]||(l[17]=u=>L.value=u),"close-on-content-click":!1,activator:se.value,"offset-y":"","offset-overflow":"","max-width":"600"},{default:n(()=>[t(S,{submittal:Z.value.submittal.raw,color:ee(Z.value)},null,8,["submittal","color"])]),_:1},8,["modelValue","activator"])]),_:1})]),_:1})]),_:1})])]),_:1})):G("",!0)])}}},Rn=Ce(Nn,[["__scopeId","data-v-7cb6a1ba"]]),Kn={__name:"index",setup(e){return(i,a)=>{const s=Rn;return p(),F(s)}}};export{Kn as default};
