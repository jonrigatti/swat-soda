import{a as We,_ as $e,b as Ye,V as ae,u as it,c as lt,d as ot,p as st,e as ut,f as rt,g as dt,h as mt,i as ct,j as vt,k as bt,l as ft,m as pt,n as Ct,o as Bt,q as gt,r as yt,s as Dt,t as At}from"./StakeholdersComponent-QBr5otTj.js";import{a9 as de,_ as pe,T as Me,E as R,W as _,r as p,aa as G,$ as U,a0 as T,f as t,w as n,a1 as N,q as V,h as W,x as f,y as P,I as C,L as Pe,a5 as be,J as Y,K as Q,S as Oe,B as h,a8 as xe,ab as kt,a4 as E,Y as ie,a3 as ve,ac as St,ad as me,p as Ne,ae as Ue,g as Re,z as ht,D as Te,e as _t,M as Vt,s as M,af as Ft,n as Qe,N as Pt,j as qe,l as Ze,ag as xt,a as Et,ah as wt,i as It,ai as $t,aj as Mt,ak as Ot,al as Nt,U as ne,am as Rt,Z as j,a2 as ce,a6 as Ut,a7 as Tt,an as Gt}from"./index-pmq8Ma7Z.js";import{V as _e}from"./vue-draggable-next.esm-bundler-C18seiKs.js";import{b as q,a as w,f as Ee,c as J,V as O,d as fe,g as Lt}from"./VCard-DRrBtofY.js";import{_ as Ge}from"./lodash-JmIeGm_b.js";class Jt{testDir(){return de.get("/server/testdir")}createSDF(l,a){return console.log("SDF creation: "+JSON.stringify(a)),de.put(`/server/createSDF/${l}`,a).then(function(s){console.log("Then: "+JSON.stringify(a)),console.log(s)})}createPDF(l,a){return console.log("PDF creation: "+JSON.stringify(a)),de.put(`/server/createPDF/${l}`,a).then(function(s){console.log("Then: "+JSON.stringify(a)),console.log(s)})}mergePDF(l,a){return console.log("PDF merging: "+JSON.stringify(a)),de.put(`/server/mergePDF/${l}`,a).then(function(s){console.log("Then: "+JSON.stringify(a)),console.log(s)})}}const Ve=new Jt,Kt={key:0},Ht={key:1},zt={__name:"PriorityMenuComponent",props:{submittalProp:{},color:{type:String,default:"cyan-darken-4"},showLabel:{type:Boolean,default:!1}},setup(e){const l=e,a=Me(),s=c=>{a.updateSubmittalPriorities(c)},r=R(()=>{var c=[];return a.projects.forEach(b=>{b.prioritySubmittals.findIndex(d=>d.submittal._id===l.submittalProp._id)!=-1&&c.push(b)}),c}),m=R(()=>{var c=[];return a.projects.forEach(b=>{b.unrankedSubmittals.findIndex(d=>d.submittal._id===l.submittalProp._id)!=-1&&c.push(b)}),c});return(c,b)=>(p(),_("div",null,[Array.isArray(r.value)&&r.value.length||Array.isArray(m.value)&&m.value.length?e.showLabel?(p(),_("div",Ht,"Priority")):G("",!0):(p(),_("div",Kt,"Not assigned to project")),(p(!0),_(U,null,T(r.value,d=>(p(),_("span",{key:d._id},[t(be,{"offset-y":""},{activator:n(({props:o})=>[t(C,Pe({class:"ma-2"},{ref_for:!0},o),{default:n(()=>[f(P(d.name)+" - "+P(d.prioritySubmittals.findIndex(D=>D.submittal._id===e.submittalProp._id)+1),1)]),_:2},1040)]),default:n(()=>[t(q,null,{default:n(()=>[t(N(_e),{modelValue:d.prioritySubmittals,"onUpdate:modelValue":o=>d.prioritySubmittals=o,group:d.name+"Submittals",draggable:".item",handle:".handle",sort:"true",onChange:o=>s(d),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:n(()=>[(p(!0),_(U,null,T(d.prioritySubmittals,(o,D)=>(p(),V(w,{key:o.submittal._id,class:W(o.submittal._id===e.submittalProp._id?`item bg-${e.color} draggable-item handle`:"item nondraggable-item")},{default:n(()=>[f(P(D+1)+". "+P(o.submittal.submittalID),1)]),_:2},1032,["class"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group","onChange"])]),_:2},1024)]),_:2},1024)]))),128)),(p(!0),_(U,null,T(m.value,d=>(p(),_("span",{key:d._id},[t(be,{"offset-y":""},{activator:n(({props:o})=>[t(C,Pe({class:"ma-2"},{ref_for:!0},o),{default:n(()=>[f(P(d.name)+" - Unranked ",1)]),_:2},1040)]),default:n(()=>[t(q,null,{default:n(()=>[t(N(_e),{modelValue:d.prioritySubmittals,"onUpdate:modelValue":o=>d.prioritySubmittals=o,group:d.name+"Submittals",draggable:".draggable-item",handle:".handle",sort:"true",onChange:o=>s(d),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:n(()=>[(p(!0),_(U,null,T(d.prioritySubmittals,(o,D)=>(p(),V(w,{key:o.submittal._id,class:W(o.submittal._id===e.submittalProp._id?`item bg-${e.color} draggable-item handle`:"item nondraggable-item")},{default:n(()=>[f(P(D+1)+". "+P(o.submittal.submittalID),1)]),_:2},1032,["class"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group","onChange"])]),_:2},1024),t(q,null,{default:n(()=>[t(N(_e),{modelValue:d.unrankedSubmittals,"onUpdate:modelValue":o=>d.unrankedSubmittals=o,group:d.name+"Submittals",draggable:".draggable-item",sort:"true",onChange:o=>s(d),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:n(()=>[(p(!0),_(U,null,T(d.unrankedSubmittals,o=>Y((p(),V(w,{key:o.submittal.submittalID,class:W(o.submittal._id===e.submittalProp._id?`item bg-${e.color} draggable-item handle`:"item nondraggable-item")},{default:n(()=>[f(P(o.submittal.submittalID),1)]),_:2},1032,["class"])),[[Q,o.submittal._id===e.submittalProp._id]])),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group","onChange"])]),_:2},1024)]),_:2},1024)]))),128))]))}},Xe=pe(zt,[["__scopeId","data-v-4b97a0c0"]]),jt={__name:"SubmittalComponent",props:{submittal:{},color:{type:String,default:function(){return"cyan"}}},setup(e){const l=Oe();Me();const a=h(!1);h(!1);const s=d=>{l.updateSubmittal(d)},r=(d,o)=>{l.submittals.find(D=>D._id===filteredSubmittals.value[o]._id).violations.push(d)},m=d=>{Ve.createSDF(d._id,d).then(o=>{console.log(o.data)}).catch(o=>{console.log(o)})},c=d=>{Ve.createPDF(d._id,d).then(o=>{console.log(o.data)}).catch(o=>{console.log(o)})},b=d=>{Ve.mergePDF(d._id,d).then(o=>{console.log(o.data)}).catch(o=>{console.log(o)})};return(d,o)=>{const D=We,x=Xe,y=$e,I=Ye;return p(),_("div",null,[t(q,{class:"rounded-t-xl"},{default:n(()=>[t(xe,{color:e.color},{default:n(()=>[t(kt,{text:e.submittal.submittalID},null,8,["text"]),t(C,{icon:"",onClick:o[0]||(o[0]=v=>a.value=!a.value)},{default:n(()=>[t(E,{class:W(["toggleUpDown",{rotate:!a.value}])},{default:n(()=>o[11]||(o[11]=[f("mdi-chevron-up",-1)])),_:1,__:[11]},8,["class"])]),_:1})]),_:1},8,["color"]),t(Ee,null,{default:n(()=>[t(ie,{modelValue:e.submittal.description,"onUpdate:modelValue":o[1]||(o[1]=v=>e.submittal.description=v),modelModifiers:{lazy:!0},label:"Description",density:"compact"},null,8,["modelValue"]),t(J,{class:"pa-0 ma-0"},{default:n(()=>[t(O,null,{default:n(()=>[t(w,null,{default:n(()=>[t(ie,{modelValue:e.submittal.owner,"onUpdate:modelValue":o[2]||(o[2]=v=>e.submittal.owner=v),modelModifiers:{lazy:!0},label:"Owner","min-width":"200",density:"compact"},null,8,["modelValue"]),o[12]||(o[12]=f(" Stakeholders ",-1)),t(D,{stakeholders:e.submittal.stakeholders},null,8,["stakeholders"]),t(x,{submittalProp:e.submittal,color:e.color,showLabel:!0},null,8,["submittalProp","color"])]),_:1,__:[12]}),t(w,null,{default:n(()=>[t(y,{dateProp:e.submittal.receivedDate,labelProp:"Received Date",iconProp:"mdi-calendar-today",onUpdateDate:o[3]||(o[3]=v=>e.submittal.receivedDate=v)},null,8,["dateProp"]),t(y,{dateProp:e.submittal.needDate,labelProp:"Need Date",iconProp:"mdi-calendar-clock",onUpdateDate:o[4]||(o[4]=v=>e.submittal.needDate=v)},null,8,["dateProp"]),t(y,{dateProp:e.submittal.dispositionDate,labelProp:"Disposition Date",iconProp:"mdi-calendar-check",onUpdateDate:o[5]||(o[5]=v=>e.submittal.dispositionDate=v)},null,8,["dateProp"])]),_:1})]),_:1})]),_:1})]),_:1}),a.value?(p(),V(q,{key:0,class:"py-1"},{default:n(()=>[t(fe,{class:"pa-2"},{default:n(()=>[t(I,{violations:e.submittal.violations},null,8,["violations"])]),_:1}),t(Ee,null,{default:n(()=>[t(I,{violations:e.submittal.violations,onAddViolation:o[6]||(o[6]=v=>r(v,d.index))},null,8,["violations"])]),_:1})]),_:1})):G("",!0),t(Lt,{class:"grey darken-4"},{default:n(()=>[t(ve),t(C,{icon:"",onClick:o[7]||(o[7]=v=>s(e.submittal))},{default:n(()=>[t(E,null,{default:n(()=>o[13]||(o[13]=[f("mdi-content-save-edit",-1)])),_:1,__:[13]})]),_:1}),t(C,{icon:"",onClick:o[8]||(o[8]=v=>m(e.submittal))},{default:n(()=>[t(E,null,{default:n(()=>o[14]||(o[14]=[f("mdi-archive-plus",-1)])),_:1,__:[14]})]),_:1}),t(C,{icon:"",onClick:o[9]||(o[9]=v=>c(e.submittal))},{default:n(()=>[t(E,null,{default:n(()=>o[15]||(o[15]=[f("mdi-file-pdf-box",-1)])),_:1,__:[15]})]),_:1}),t(C,{icon:"",onClick:o[10]||(o[10]=v=>b(e.submittal))},{default:n(()=>[t(E,null,{default:n(()=>o[16]||(o[16]=[f("mdi-vector-combine",-1)])),_:1,__:[16]})]),_:1})]),_:1})]),_:1})])}}},Wt=pe(jt,[["__scopeId","data-v-d2200194"]]),Yt={__name:"SubmittalSearchComponent",setup(e){const l=Oe();h(!0);const a=h([{id:Math.random()*1e4,key:"",value:"",andOr:"and",operator:"$eq"}]),s=[{text:"Submittal ID",value:{name:"submittalID",type:"String"}},{text:"Submittal description",value:{name:"description",type:"String"}},{text:"Submittal need date",value:{name:"needDate",type:"Date"}},{text:"Submittal received date",value:{name:"receivedDate",type:"Date"}},{text:"Submittal disposition date",value:{name:"dispositionDate",type:"Date"}},{text:"Submittal owner",value:{name:"owner",type:"String"}},{text:"Violation category",value:{name:"violations.category",type:"String"}},{text:"Violation limit",value:{name:"violations.limit",type:"Number"}},{text:"Violation actual",value:{name:"violations.actual",type:"Number"}},{text:"Violation reference",value:{name:"violations.reference",type:"String"}}],r=[{text:"=",value:"$eq"},{text:">",value:"$gt"},{text:">=",value:"$gte"},{text:"<",value:"$lt"},{text:"<=",value:"$lte"},{text:"!=",value:"$ne"}],m=[{text:"=",value:"$eq"},{text:"!=",value:"$not"}],c=R(()=>a.value.length==0||a.value[a.value.length-1].value!=""),b=()=>{c.value&&a.value.push({id:Math.random()*1e4,key:"",value:"",andOr:"and",operator:"$eq"}),console.log(JSON.stringify(a))},d=()=>{a.value=[{id:Math.random()*1e4,key:"",value:"",andOr:"and",operator:"$eq"}],l.getSubmittals()},o=x=>{a.value.splice(x,1)},D=()=>{console.log("Search: "+JSON.stringify(a.value)),l.getDynamicQuery(a.value)};return(x,y)=>{const I=$e;return p(),_("div",null,[t(q,null,{default:n(()=>[t(fe,{class:"pink pt-4 pl-4 ma-0"},{default:n(()=>[t(E,{"x-large":"",color:"pink lighten-4"},{default:n(()=>y[0]||(y[0]=[f("mdi-magnify",-1)])),_:1,__:[0]}),y[1]||(y[1]=f(" Submittal Query ",-1))]),_:1,__:[1]}),t(Ee,{class:"pa-0 ma-0"},{default:n(()=>[t(J,{fluid:""},{default:n(()=>[t(O,null,{default:n(()=>[t(w,null,{default:n(()=>[t(J,{fluid:""},{default:n(()=>[(p(!0),_(U,null,T(a.value,v=>(p(),V(O,{justify:"start",class:"pa-0 ma-0","no-gutters":"",key:v.id},{default:n(()=>[t(w,{cols:"1"},{default:n(()=>[t(ae,{modelValue:v.andOr,"onUpdate:modelValue":g=>v.andOr=g,items:["and","or"],class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(w,{cols:"1"},{default:n(()=>[v.key.type!="String"?(p(),V(ae,{key:0,modelValue:v.operator,"onUpdate:modelValue":g=>v.operator=g,"item-title":"text","item-value":"value",items:r,class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])):G("",!0),v.key.type=="String"?(p(),V(ae,{key:1,modelValue:v.operator,"onUpdate:modelValue":g=>v.operator=g,"item-title":"text","item-value":"value",items:m,class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])):G("",!0)]),_:2},1024),t(w,{cols:"2"},{default:n(()=>[t(ae,{modelValue:v.key,"onUpdate:modelValue":g=>v.key=g,label:"Search field","item-title":"text","item-value":"value",items:s,class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(w,{cols:"4"},{default:n(()=>[v.key.type!="Date"?(p(),V(ie,{key:0,modelValue:v.value,"onUpdate:modelValue":g=>v.value=g,density:"compact",label:"Value",class:"pa-1 ma-1"},null,8,["modelValue","onUpdate:modelValue"])):G("",!0),v.key.type=="Date"?(p(),V(I,{key:1,dateProp:v.value,labelProp:"Value",iconProp:"mdi-calendar",onUpdateDate:g=>v.value=g},null,8,["dateProp","onUpdateDate"])):G("",!0)]),_:2},1024),t(w,null,{default:n(()=>[t(C,{size:"x-large",class:"pa-2 ma-2",onClick:g=>o(a.value.indexOf(v))},{default:n(()=>[t(E,null,{default:n(()=>y[2]||(y[2]=[f("mdi-minus",-1)])),_:1,__:[2]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),t(O,null,{default:n(()=>[t(C,{class:"ma-2",onClick:b},{default:n(()=>y[3]||(y[3]=[f("Add field",-1)])),_:1,__:[3]}),Y(t(C,{class:"ma-2",color:"green-darken-2","append-icon":"mdi-magnify",onClick:D},{default:n(()=>y[4]||(y[4]=[f("Search!",-1)])),_:1,__:[4]},512),[[Q,c.value]])]),_:1}),t(O,null,{default:n(()=>[Y(t(C,{class:"ma-2",color:"red-darken-2","append-icon":"mdi-close-circle",onClick:d},{default:n(()=>y[5]||(y[5]=[f("Clear Search",-1)])),_:1,__:[5]},512),[[Q,c.value]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}},Qt=pe(Yt,[["__scopeId","data-v-9fefa7cf"]]);var qt="[object Symbol]",et=/[\\^$.*+?()[\]{}|]/g,Zt=RegExp(et.source),Xt=typeof me=="object"&&me&&me.Object===Object&&me,en=typeof self=="object"&&self&&self.Object===Object&&self,tn=Xt||en||Function("return this")(),nn=Object.prototype,an=nn.toString,Le=tn.Symbol,Je=Le?Le.prototype:void 0,Ke=Je?Je.toString:void 0;function ln(e){if(typeof e=="string")return e;if(sn(e))return Ke?Ke.call(e):"";var l=e+"";return l=="0"&&1/e==-1/0?"-0":l}function on(e){return!!e&&typeof e=="object"}function sn(e){return typeof e=="symbol"||on(e)&&an.call(e)==qt}function un(e){return e==null?"":ln(e)}function rn(e){return e=un(e),e&&Zt.test(e)?e.replace(et,"\\$&"):e}var dn=rn;const K=St(dn);function mn(e,l){return typeof e=="string"?l.checkString(e):typeof e=="number"?l.checkNumber(e):!1}function we(e,l,a,s){if(typeof e=="object")if(Array.isArray(e)){for(const r of e)if(we(r,l,a,s))return!0}else for(const r in e){a.push(r);const m=we(e[r],l,a,s);if(a.pop(),m)return!0}else{if(l.type==="exists")return l.key.test(a.join("."))?!!e:!1;{const r=a.join(".");for(const m of s.ignorePaths)if(m.test(r))return!1;if(s.includePaths){let m=!1;for(const c of s.includePaths)if(c.test(r)){m=!0;break}if(!m)return!1}return l.key&&!l.key.test(r)?!1:mn(e,l)}}return!1}function He(e,l,a,s){if(l.length>0){let r=!1;for(const m of l)if(we(e,m,[],s)?!m.negate:m.negate){if(a==="OR")return!0;r=!0}else if(a==="AND")return!1;return r}return!0}function Ie(e,l){const a=[];let s=!1,r=0,m="";for(let c=0;c<e.length;c++){const b=e[c];s?b===m&&(s=!1,m=""):b==='"'||b==="'"?(s=!0,m=b):b.match(l)&&!s&&(a.push(e.slice(r,c).trim()),r=c+1),c===e.length-1&&a.push(e.slice(r).trim())}return a.map(c=>c.startsWith('"')&&c.endsWith('"')||c.startsWith("'")&&c.endsWith("'")?c.slice(1,-1):c).filter(Boolean)}const cn={"<":function(l){const a=Number(l[0]);return s=>s<a},"<=":function(l){const a=Number(l[0]);return s=>s<=a},"=":function(l){const a=l[0].split(",").filter(Boolean).map(Number);return s=>{for(const r of a)if(s===r)return!0;return!1}},">=":function(l){const a=Number(l[0]);return s=>s>=a},">":function(l){const a=Number(l[0]);return s=>s>a},"..":function(l){const a=Number(l[0]),s=Number(l[1]);return r=>r>=a&&r<=s}};function ze(e){const{values:l,operator:a}=vn(e),s=cn[a];if(!s)throw new Error(`unknown operator ${a}`);return s(l)}function vn(e){const l=/^\s*\(?\s*(?<startOperator><=|>=|<|=|>|\.\.\s*)?\s*(?<firstValue>-?\d*\.?\d+)\s*(?:(?<afterDots>\.\.)\s*(?<secondValue>-?\d*\.?\d*))?\s*\)?\s*$/.exec(e);if(!l)return{operator:"=",values:[e]};if(!l.groups)throw new Error("unreachable");const{startOperator:a,firstValue:s,afterDots:r,secondValue:m}=l.groups;let c=a;const b=s?[s]:[];return a===".."?c="<=":!a&&r&&!m?c=">=":r&&(c=".."),m&&(Number(m)<Number(s)?b.unshift(m):b.push(m)),{values:b,operator:c||"="}}const bn={"<":function(l){return a=>a<l[0]},"<=":function(l){return a=>a<=l[0]},"=":function(l,a){const s=Ie(l[0],",").filter(Boolean).map(r=>new RegExp(`^${K(r)}$`,a));return r=>{for(const m of s)if(m.test(r))return!0;return!1}},"~":function(l,a){const s=Ie(l[0],",").filter(Boolean).map(r=>new RegExp(K(r),a));return r=>{for(const m of s)if(m.test(r))return!0;return!1}},">=":function(l){return a=>a>=l[0]},">":function(l){return a=>a>l[0]},"..":function(l){return a=>a>=l[0]&&a<=l[1]}};function je(e,l){const{values:a,operator:s}=fn(e),r=bn[s];if(!r)throw new Error(`unreachable unknown operator ${s}`);return r(a,l)}function fn(e){var b;const l=e.split(".."),a=/^\s*\(?(?<operator><=|<|=|>=|>)?\s*(?<value>\S*)\s*\)?$/.exec(l[0]);if(!a)return{operator:"~",values:[e]};if(!a.groups)throw new Error("unreachable");const{value:s}=a.groups;let{operator:r}=a.groups;const m=(b=l[1])==null?void 0:b.trim();let c=[s];return l.length>1&&(r="..",m?s?s<m?c.push(m):c.unshift(m):(c=[m],r="<="):r=">="),{operator:r||"~",values:c}}function pn(e,l={}){const{caseSensitive:a,pathAlias:s={}}=l,r=a?"":"i";let m=!1;e.startsWith("-")&&(m=!0,e=e.slice(1));const c=e.indexOf(":");if(c!==-1){const b=e.slice(Math.max(0,c+1));if(c>0){const d=e.slice(0,Math.max(0,c));return d==="is"?{type:"exists",negate:m,key:new RegExp(`(^|\\.)${K(b)}(\\.|$)`,r)}:{type:"matches",negate:m,key:s[d]||new RegExp(`(^|\\.)${K(d)}(\\.|$)`,r),checkNumber:ze(b),checkString:je(b,r)}}}return{type:"matches",negate:m,checkNumber:ze(e),checkString:je(e,r)}}function Cn(e,l={}){return e.map(a=>pn(a,l))}function Bn(e,l){const{insensitive:a}=l,s={};for(const[r,m]of Object.entries(e))m instanceof RegExp?s[r]=m:s[r]=new RegExp(`(^|\\.)${K(m)}(\\.|$)`,a);return s}function Fe(e,l={}){const{index:a=!1,predicate:s="AND",ignorePaths:r=[],includePaths:m,pathAlias:c={}}=l,b=l.limit||1/0,d=l.caseSensitive?"":"i";let o=l.keywords||[];const D=Bn(c,{insensitive:d}),x=r.map(g=>typeof g=="string"?new RegExp(`(^|\\.)${K(g)}(\\.|$)`,d):g),y=m?m.map(g=>typeof g=="string"?new RegExp(`(^|\\.)${K(g)}(\\.|$)`,d):g):void 0;typeof o=="string"&&(o=Ie(o,/[\t\n\r ]/));const I=Cn(o,{caseSensitive:l.caseSensitive,pathAlias:D});let v=0;if(a){const g=[];for(let $=0;$<e.length&&v<b;$++)He(e[$],I,s,{ignorePaths:x,includePaths:y})&&(v=g.push($));return g}else{const g=[];for(let $=0;$<e.length&&v<b;$++)He(e[$],I,s,{ignorePaths:x,includePaths:y})&&(v=g.push(e[$]));return g}}const gn=Ne({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function yn(e,l){const a=e.returnObject?l:Ue(l,e.itemValue),s=Ue(l,e.itemSelectable,!0);return{type:"item",value:a,selectable:s,raw:l}}function Dn(e,l){const a=[];for(const s of l)a.push(yn(e,s));return a}function An(e){return{items:R(()=>Dn(e,e.items))}}const kn=Ne({search:String,loading:Boolean,...Ze(),...gn(),...Dt(),...yt(),...gt({itemsPerPage:5}),...Bt(),...Ct(),...pt(),...qe(),...Pt({transition:{component:xt,hideOnLeave:!0}})},"VDataIterator"),Sn=Re()({name:"VDataIterator",props:kn(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,l){let{slots:a}=l;const s=ht(e,"groupBy"),r=Te(()=>e.search),{items:m}=An(e),{filteredItems:c}=it(e,m,r,{transform:i=>i.raw}),{sortBy:b,multiSort:d,mustSort:o}=lt(e),{page:D,itemsPerPage:x}=ot(e),{toggleSort:y}=ft({sortBy:b,multiSort:d,mustSort:o,page:D}),{sortByWithGroups:I,opened:v,extractRows:g,isGroupOpen:$,toggleGroup:Ce}=st({groupBy:s,sortBy:b}),{sortedItems:Be}=ut(e,c,I,{transform:i=>i.raw}),{flatItems:le}=rt(Be,s,v),ge=Te(()=>le.value.length),{startIndex:Z,stopIndex:oe,pageCount:L,prevPage:ye,nextPage:De,setItemsPerPage:Ae,setPage:ke}=dt({page:D,itemsPerPage:x,itemsLength:ge}),{paginatedItems:X}=mt({items:le,startIndex:Z,stopIndex:oe,itemsPerPage:x}),ee=R(()=>g(X.value)),{isSelected:H,select:te,selectAll:se,toggleSelect:z}=ct(e,{allItems:m,currentPage:ee}),{isExpanded:ue,toggleExpand:Se}=vt(e);bt({page:D,itemsPerPage:x,sortBy:b,groupBy:s,search:r});const B=R(()=>({page:D.value,itemsPerPage:x.value,sortBy:b.value,pageCount:L.value,toggleSort:y,prevPage:ye,nextPage:De,setPage:ke,setItemsPerPage:Ae,isSelected:H,select:te,selectAll:se,toggleSelect:z,isExpanded:ue,toggleExpand:Se,isGroupOpen:$,toggleGroup:Ce,items:ee.value,groupedItems:X.value}));return _t(()=>t(e.tag,{class:W(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Qe(e.style)},{default:()=>{var i,k;return[(i=a.header)==null?void 0:i.call(a,B.value),t(Vt,{transition:e.transition},{default:()=>{var S,F;return[e.loading?t(Ft,{key:"loader",name:"v-data-iterator",active:!0},{default:he=>{var re;return(re=a.loader)==null?void 0:re.call(a,he)}}):M("div",{key:"items"},[X.value.length?(F=a.default)==null?void 0:F.call(a,B.value):(S=a["no-data"])==null?void 0:S.call(a)])]}}),(k=a.footer)==null?void 0:k.call(a,B.value)]}})),{}}}),tt=Symbol.for("vuetify:v-item-group"),hn=Ne({...Ze(),...$t({selectedClass:"v-item--selected"}),...qe(),...It()},"VItemGroup"),_n=Re()({name:"VItemGroup",props:hn(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:a}=l;const{themeClasses:s}=Et(e),{isSelected:r,select:m,next:c,prev:b,selected:d}=wt(e,tt);return()=>t(e.tag,{class:W(["v-item-group",s.value,e.class]),style:Qe(e.style)},{default:()=>{var o;return[(o=a.default)==null?void 0:o.call(a,{isSelected:r,select:m,next:c,prev:b,selected:d.value})]}})}}),Vn=Re()({name:"VItem",props:Mt(),emits:{"group:selected":e=>!0},setup(e,l){let{slots:a}=l;const{isSelected:s,select:r,toggle:m,selectedClass:c,value:b,disabled:d}=Ot(e,tt);return()=>{var o;return(o=a.default)==null?void 0:o.call(a,{isSelected:s.value,selectedClass:c.value,select:r,toggle:m,value:b.value,disabled:d.value})}}}),Fn={class:"pa-1"},Pn={class:"pa-1"},xn={class:"d-flex"},En={class:"pa-1"},wn={class:"pa-1"},In={class:"pa-1"},$n={class:"mr-4 grey--text"},Mn=["colspan"],On={style:{"user-select":"none"}},Nn={__name:"SubmittalsComponent",setup(e){const l=Oe(),a=Me(),s=Nt(),r=h(null),m=h([new Date]),c=[5,10,20,100],b=h(""),d=h([]),o=h({peerReviewNeeded:null,nrInformed:null,owner:[],open:null}),D=h(["A","B","C","D"]),x=h(!1),y=h(1),I=h(10),v=[{key:h("submittalID"),order:"asc"}],g=[{text:"Submittal ID",value:"submittalID"},{text:"Need Date",value:"needDate"},{text:"Owner",value:"owner"}],$=h([]);h(!1);const Ce=B=>B.length<=200||"Input too long!";h({});const Be=[{title:"Submittal",align:"start",key:"submittalID",width:"180px"},{title:"Description",key:"description",width:"40%"},{title:"Received Date",key:"receivedDate",width:"205px"},{title:"Need Date",key:"needDate",width:"205px"},{title:"Disposition Date",key:"dispositionDate",width:"205px"},{title:"Priority",key:"priority"},{title:"Owner",key:"owner"},{title:"",key:"save",width:"1px",sortable:!1},{title:"",key:"data-table-expand",width:"1px"}],le=["AA","BB","FF","DD","EE","CC"],ge=[{name:"Shirley Clemas",unit:"BB",subdivision:"BBB"},{name:"Aubrey Meenehan",unit:"FF"},{name:"Nikolia Dulson",unit:"AA",subdivision:"AAA"},{name:"Claretta Enns",unit:"DD",subdivision:"CCC"},{name:"Ninnetta Kamiyama",unit:"AA",subdivision:"AAA"},{name:"Brenna Pettet",unit:"DD",subdivision:"CCC"},{name:"Clementina Burnham",unit:"BB",subdivision:"BBB"},{name:"Shara Willeson",unit:"DD",subdivision:"CCC"},{name:"Salome Bernardo",unit:"DD",subdivision:"CCC"},{name:"Conrade Dines",unit:"DD",subdivision:"CCC"},{name:"Marillin Foister",unit:"EE",subdivision:"CCC"},{name:"Maggee Silvester",unit:"FF"},{name:"Chery Barhims",unit:"DD",subdivision:"CCC"},{name:"Spence Grishinov",unit:"CC",subdivision:"BBB"},{name:"Dulciana Saberton",unit:"AA",subdivision:"AAA"},{name:"Valina Cleaver",unit:"FF"},{name:"Kenna Hadgkiss",unit:"AA",subdivision:"AAA"},{name:"Shay Rennie",unit:"FF"},{name:"Colin Van der Beek",unit:"EE",subdivision:"CCC"},{name:"Westbrook Rumens",unit:"CC",subdivision:"BBB"},{name:"Renee Schwanden",unit:"FF"},{name:"Euphemia Ciraldo",unit:"EE",subdivision:"CCC"},{name:"Michel Mewett",unit:"FF"},{name:"Aymer Aland",unit:"FF"},{name:"Dennison Corbould",unit:"EE",subdivision:"CCC"},{name:"Christoffer Kryska",unit:"BB",subdivision:"BBB"},{name:"Odo Dykins",unit:"CC",subdivision:"BBB"},{name:"Maurizio Wrates",unit:"DD",subdivision:"CCC"},{name:"Leia Swinburn",unit:"BB",subdivision:"BBB"},{name:"Noam Ewbanck",unit:"DD",subdivision:"CCC"},{name:"Carmine Stuther",unit:"CC",subdivision:"BBB"},{name:"Caesar Jeppensen",unit:"CC",subdivision:"BBB"},{name:"Phillipe Huckle",unit:"CC",subdivision:"BBB"},{name:"Edi Rentelll",unit:"CC",subdivision:"BBB"},{name:"Audi Moughtin",unit:"EE",subdivision:"CCC"},{name:"Gwenora Peascod",unit:"AA",subdivision:"AAA"},{name:"Rockey Colam",unit:"EE",subdivision:"CCC"},{name:"Margie Truggian",unit:"AA",subdivision:"AAA"},{name:"Frederica Siney",unit:"FF"},{name:"Cary Lindwasser",unit:"DD",subdivision:"CCC"},{name:"Robinet Pettiward",unit:"DD",subdivision:"CCC"},{name:"Durand Godspede",unit:"AA",subdivision:"AAA"},{name:"Tommie Dunmuir",unit:"DD",subdivision:"CCC"},{name:"Raimundo Rylatt",unit:"EE",subdivision:"CCC"},{name:"Verney McKechnie",unit:"AA",subdivision:"AAA"},{name:"Ray Binding",unit:"BB",subdivision:"BBB"},{name:"Valery Vedishchev",unit:"FF"},{name:"Trevar Faber",unit:"AA",subdivision:"AAA"},{name:"Allyce O'Giany",unit:"DD",subdivision:"CCC"},{name:"Armstrong Androlli",unit:"FF"},{name:"Kingsly Clymo",unit:"EE",subdivision:"CCC"},{name:"Chris Simister",unit:"CC",subdivision:"BBB"},{name:"Sloan Breagan",unit:"FF"},{name:"Valentina Alston",unit:"CC",subdivision:"BBB"},{name:"Shae Hadfield",unit:"FF"},{name:"Gardie Latta",unit:"CC",subdivision:"BBB"},{name:"Kermit Odney",unit:"BB",subdivision:"BBB"},{name:"Vina Cowpertwait",unit:"BB",subdivision:"BBB"},{name:"Tirrell Nanninini",unit:"BB",subdivision:"BBB"},{name:"Taylor Bench",unit:"FF"},{name:"Cornela Philson",unit:"AA",subdivision:"AAA"},{name:"Rutger Vesque",unit:"CC",subdivision:"BBB"},{name:"Deane Mityakov",unit:"CC",subdivision:"BBB"},{name:"Alexander Bradwell",unit:"EE",subdivision:"CCC"},{name:"Padget Alsobrook",unit:"EE",subdivision:"CCC"},{name:"Gaynor Steart",unit:"EE",subdivision:"CCC"},{name:"Findley Laba",unit:"CC",subdivision:"BBB"},{name:"Benedikt Gothliff",unit:"CC",subdivision:"BBB"},{name:"Fernandina Alcoran",unit:"CC",subdivision:"BBB"},{name:"Stearn Cahalan",unit:"DD",subdivision:"CCC"},{name:"Felicio Rubinfeld",unit:"BB",subdivision:"BBB"},{name:"Remus Alderson",unit:"FF"},{name:"Carrol Kohen",unit:"CC",subdivision:"BBB"},{name:"Jud McParland",unit:"DD",subdivision:"CCC"},{name:"Moore Casetta",unit:"DD",subdivision:"CCC"},{name:"Aileen Cartner",unit:"EE",subdivision:"CCC"},{name:"Lisbeth Melledy",unit:"CC",subdivision:"BBB"},{name:"Andra Kubiak",unit:"EE",subdivision:"CCC"},{name:"Tony Aggs",unit:"CC",subdivision:"BBB"},{name:"Erma Pennycock",unit:"CC",subdivision:"BBB"},{name:"Ailis Sutterby",unit:"CC",subdivision:"BBB"},{name:"Krissy Hayhoe",unit:"DD",subdivision:"CCC"},{name:"Cecil Jarmain",unit:"BB",subdivision:"BBB"},{name:"Datha Gooda",unit:"BB",subdivision:"BBB"},{name:"Donna Dukes",unit:"CC",subdivision:"BBB"},{name:"Cyril Gulc",unit:"CC",subdivision:"BBB"},{name:"Joice Hrynczyk",unit:"BB",subdivision:"BBB"},{name:"Jessie Vogl",unit:"FF"},{name:"Bary Lethbrig",unit:"AA",subdivision:"AAA"},{name:"Nelle Groucock",unit:"BB",subdivision:"BBB"},{name:"Winne Cowthard",unit:"CC",subdivision:"BBB"},{name:"Woodie Beckmann",unit:"AA",subdivision:"AAA"},{name:"Ker Bugg",unit:"CC",subdivision:"BBB"},{name:"Newton Biddlestone",unit:"DD",subdivision:"CCC"},{name:"Emily Bernadot",unit:"DD",subdivision:"CCC"},{name:"Walt Girault",unit:"FF"},{name:"Karole Vlasenkov",unit:"AA",subdivision:"AAA"},{name:"Matt Postans",unit:"DD",subdivision:"CCC"},{name:"Chickie Gisbey",unit:"BB",subdivision:"BBB"},{name:"Mason Roobottom",unit:"DD",subdivision:"CCC"},{name:"Bradan Karle",unit:"FF"},{name:"Paulette Suter",unit:"AA",subdivision:"AAA"},{name:"Riobard Roj",unit:"DD",subdivision:"CCC"},{name:"Fae Farlowe",unit:"BB",subdivision:"BBB"},{name:"Geoffrey Kemmett",unit:"EE",subdivision:"CCC"},{name:"Cristine Littlepage",unit:"AA",subdivision:"AAA"},{name:"Hollyanne Takkos",unit:"DD",subdivision:"CCC"},{name:"Glenden Hulcoop",unit:"BB",subdivision:"BBB"},{name:"Kenon Vasyushkhin",unit:"FF"},{name:"Konstance Georgiades",unit:"DD",subdivision:"CCC"},{name:"Karly Humbles",unit:"EE",subdivision:"CCC"},{name:"Joane Marfield",unit:"BB",subdivision:"BBB"},{name:"Fannie Hens",unit:"BB",subdivision:"BBB"},{name:"Fred Padwick",unit:"EE",subdivision:"CCC"},{name:"Riki Laughtisse",unit:"FF"},{name:"Crissy Craw",unit:"FF"},{name:"Nessy Streets",unit:"FF"},{name:"Bartel Catterill",unit:"AA",subdivision:"AAA"},{name:"Aldin Pentony",unit:"EE",subdivision:"CCC"},{name:"Amandy Lorentzen",unit:"DD",subdivision:"CCC"},{name:"Trisha Antoinet",unit:"DD",subdivision:"CCC"},{name:"Gustavo Liley",unit:"DD",subdivision:"CCC"},{name:"Thornie Maly",unit:"DD",subdivision:"CCC"},{name:"Eleni Gutowski",unit:"FF"},{name:"Marcelle Hyam",unit:"EE",subdivision:"CCC"},{name:"Lynna MacNockater",unit:"CC",subdivision:"BBB"},{name:"Othilie Vergo",unit:"CC",subdivision:"BBB"},{name:"Javier Sikorski",unit:"FF"},{name:"Corbet Camber",unit:"FF"},{name:"Marylee Sneath",unit:"DD",subdivision:"CCC"},{name:"Walker Ost",unit:"EE",subdivision:"CCC"},{name:"Aleen Gorman",unit:"BB",subdivision:"BBB"},{name:"Pembroke Kleinzweig",unit:"FF"},{name:"Lavinia Thaxter",unit:"DD",subdivision:"CCC"},{name:"Bette-ann Pepys",unit:"DD",subdivision:"CCC"},{name:"Sharai MacVean",unit:"AA",subdivision:"AAA"},{name:"Natal Tilmouth",unit:"DD",subdivision:"CCC"},{name:"Harrietta Hentzer",unit:"FF"},{name:"Derward Blackaller",unit:"AA",subdivision:"AAA"},{name:"Caspar Driuzzi",unit:"CC",subdivision:"BBB"},{name:"Angeline Nannizzi",unit:"CC",subdivision:"BBB"},{name:"Mauricio Blackley",unit:"FF"},{name:"Jessi Tramel",unit:"EE",subdivision:"CCC"},{name:"Gilligan Butterley",unit:"BB",subdivision:"BBB"},{name:"Earvin Ellingford",unit:"BB",subdivision:"BBB"},{name:"Jeanine Moyce",unit:"DD",subdivision:"CCC"},{name:"Jessie Arangy",unit:"EE",subdivision:"CCC"},{name:"Morley Goady",unit:"AA",subdivision:"AAA"},{name:"Michal Hucks",unit:"BB",subdivision:"BBB"},{name:"Augusto Husthwaite",unit:"AA",subdivision:"AAA"},{name:"Teddy Punt",unit:"BB",subdivision:"BBB"},{name:"Brenden Stockney",unit:"BB",subdivision:"BBB"},{name:"Agathe Smitheram",unit:"FF"},{name:"Robbyn Morrid",unit:"CC",subdivision:"BBB"},{name:"Sheeree Berresford",unit:"CC",subdivision:"BBB"},{name:"Mimi Wallentin",unit:"FF"},{name:"Doralynne Konerding",unit:"BB",subdivision:"BBB"},{name:"Kipper Kegan",unit:"FF"},{name:"Drusilla Hassin",unit:"DD",subdivision:"CCC"},{name:"Lindon Hearne",unit:"DD",subdivision:"CCC"},{name:"Cory Hanna",unit:"EE",subdivision:"CCC"},{name:"Nussy Streets",unit:"DD",subdivision:"CCC"},{name:"Stefano O' Cuolahan",unit:"DD",subdivision:"CCC"},{name:"Sebastiano Janes",unit:"FF"},{name:"Johanna Lilloe",unit:"BB",subdivision:"BBB"},{name:"Walsh Binestead",unit:"CC",subdivision:"BBB"},{name:"Marcel Beatson",unit:"AA",subdivision:"AAA"},{name:"Eduardo Olenchikov",unit:"DD",subdivision:"CCC"},{name:"Tremain Polak",unit:"EE",subdivision:"CCC"},{name:"Barb Sheach",unit:"BB",subdivision:"BBB"},{name:"Constantina Oganesian",unit:"BB",subdivision:"BBB"},{name:"Wynn Gorgen",unit:"EE",subdivision:"CCC"},{name:"Ulysses Harmar",unit:"BB",subdivision:"BBB"},{name:"Tiffy Pitkeathley",unit:"FF"},{name:"Mathilda Mc Cahey",unit:"BB",subdivision:"BBB"},{name:"Benedicto Durn",unit:"AA",subdivision:"AAA"},{name:"Minna Bartczak",unit:"FF"},{name:"Evangeline Stoak",unit:"AA",subdivision:"AAA"},{name:"Germayne Wannop",unit:"EE",subdivision:"CCC"},{name:"Monty Ivie",unit:"DD",subdivision:"CCC"},{name:"Myrtie Swait",unit:"CC",subdivision:"BBB"},{name:"Susanne Hargreaves",unit:"CC",subdivision:"BBB"},{name:"Maura Burhill",unit:"FF"},{name:"Lora Woodford",unit:"EE",subdivision:"CCC"},{name:"Floyd Salvage",unit:"DD",subdivision:"CCC"},{name:"Claudian Martinot",unit:"BB",subdivision:"BBB"},{name:"Dedie Blumer",unit:"AA",subdivision:"AAA"},{name:"Daloris Roskell",unit:"FF"},{name:"Nerty Harmant",unit:"AA",subdivision:"AAA"},{name:"Celinda Lowensohn",unit:"FF"},{name:"Glenn Bearns",unit:"EE",subdivision:"CCC"},{name:"Gwenora Candey",unit:"CC",subdivision:"BBB"},{name:"Waldo Locke",unit:"DD",subdivision:"CCC"},{name:"Kendell Drable",unit:"FF"},{name:"Marchelle Clewer",unit:"CC",subdivision:"BBB"},{name:"Richmound Vinick",unit:"DD",subdivision:"CCC"},{name:"Corbin Milne",unit:"AA",subdivision:"AAA"},{name:"Georgina Cadagan",unit:"DD",subdivision:"CCC"},{name:"Tripp Kingdom",unit:"AA",subdivision:"AAA"},{name:"Ramon D'Souza",unit:"FF"},{name:"Hettie Gluyas",unit:"AA",subdivision:"AAA"},{name:"Valentina Sandle",unit:"EE",subdivision:"CCC"},{name:"Marchelle Haker",unit:"CC",subdivision:"BBB"},{name:"Harlene Lynnett",unit:"FF"},{name:"Joaquin Plumtree",unit:"BB",subdivision:"BBB"},{name:"Carilyn Yate",unit:"EE",subdivision:"CCC"},{name:"Alberta Beswetherick",unit:"EE",subdivision:"CCC"},{name:"Lawry Eyckelbeck",unit:"BB",subdivision:"BBB"},{name:"Kathie Latliff",unit:"FF"},{name:"Batholomew Huyge",unit:"CC",subdivision:"BBB"},{name:"Lucias Graeser",unit:"AA",subdivision:"AAA"},{name:"Herman Levay",unit:"FF"},{name:"Sibel Peterffy",unit:"AA",subdivision:"AAA"},{name:"Urban Lars",unit:"FF"},{name:"Annmaria Ferenczy",unit:"DD",subdivision:"CCC"},{name:"Grethel Sage",unit:"FF"},{name:"Emerson Elsdon",unit:"BB",subdivision:"BBB"},{name:"Melany Noddles",unit:"AA",subdivision:"AAA"},{name:"Angelique Bethell",unit:"FF"},{name:"Tani Yoskowitz",unit:"BB",subdivision:"BBB"},{name:"Clive Sartain",unit:"AA",subdivision:"AAA"},{name:"Cristin Yurkin",unit:"FF"},{name:"Maurie Birkmyre",unit:"AA",subdivision:"AAA"},{name:"Martie Marrows",unit:"EE",subdivision:"CCC"},{name:"Josephine Riddell",unit:"DD",subdivision:"CCC"},{name:"Catherin Brockton",unit:"EE",subdivision:"CCC"},{name:"Marthena Brierley",unit:"EE",subdivision:"CCC"},{name:"Lorianne MacDermand",unit:"BB",subdivision:"BBB"},{name:"Aloin Tisor",unit:"BB",subdivision:"BBB"},{name:"Kennett Ducker",unit:"CC",subdivision:"BBB"},{name:"Zach Baiss",unit:"FF"},{name:"Ronica Sivess",unit:"AA",subdivision:"AAA"},{name:"Concettina Syalvester",unit:"AA",subdivision:"AAA"},{name:"Iorgos Jovanovic",unit:"BB",subdivision:"BBB"},{name:"Susana Dowsey",unit:"BB",subdivision:"BBB"},{name:"Jeromy Yakunikov",unit:"FF"},{name:"Vonny Callendar",unit:"BB",subdivision:"BBB"},{name:"Bill Huggons",unit:"BB",subdivision:"BBB"},{name:"Dacie Klimowicz",unit:"CC",subdivision:"BBB"},{name:"Joline Butt",unit:"FF"}],Z=h({}),oe=h(null),L=h(!1),ye=B=>{l.updateSubmittal(B)},De=()=>{y.value+1<=te.value&&(y.value+=1)},Ae=()=>{y.value-1>=1&&(y.value-=1)},ke=B=>{I.value=B},X=({nativeEvent:B,event:i})=>{const k=()=>{Z.value=i,oe.value=B.target,requestAnimationFrame(()=>requestAnimationFrame(()=>L.value=!0))};L.value?(L.value=!1,requestAnimationFrame(()=>requestAnimationFrame(()=>k()))):k(),B.stopPropagation()},ee=B=>JSON.stringify(B)==="{}"?"":H(B.submittal),H=(B,i)=>{const S=ne(B).diff(ne(),"day");var F;return S<0?F="red-darken-1":S<7?F="deep-orange-darken-1":S<14?F="orange-darken-1":S<21?F="amber-darken-1":S<28?F="light-green-darken-1":F="green-darken-1",i!=null&&(F="grey-darken-2"),F},te=R(()=>Math.ceil(z.value.length/I.value)),se=R(()=>{console.log("projects:"+JSON.stringify(a.projects));var B=a.projects.filter(function(k){return D.value.includes(k.name)}),i=[];return B.forEach(k=>{k.contracts.forEach(S=>{!i.includes(S.contractID)&&i.push(S.contractID)})}),i}),z=R(()=>{var B=[];return se.value.forEach(i=>{B.push.apply(B,Fe(l.submittals,{keywords:`submittalID:-${i}-`}))}),console.log(`Contracts filter: ${JSON.stringify(se.value)}`),Object.entries(o.value).forEach(i=>{const[k,S]=i;S!=null&&(Array.isArray(S)?(B=Fe(B,{keywords:`${S.length>0?k+":":""}${JSON.stringify(S).replace("[","").replace("]","")}`,predicate:"OR"}),console.log(`${S.length>0?k+":":""}${JSON.stringify(S).replace("[","").replace("]","")}`)):B=B.filter(F=>F[k]===S))}),console.log("Filtered submittals:"),console.log(B),B}),ue=R(()=>Fe(ge,{keywords:`unit:${d.value}`,predicate:"OR"})),Se=R(()=>{const B=z.value.map(i=>{const k={};return k.name=`${i.submittalID} ${i.description!=""?"-":""} ${i.description}`,k.start=ne(i.receivedDate).format("YYYY-MM-DD"),k.end=ne(i.needDate).format("YYYY-MM-DD"),k.submittal=i,k});return Ge.sortBy(B,["name","start","end"])});return(B,i)=>{const k=Qt,S=Wt,F=$e,he=Xe,re=We,nt=Ye,at=Rt("v-calendar");return p(),_("div",null,[Y(t(k,null,null,512),[[Q,N(s).submittalSearch]]),t(J,{fluid:""},{default:n(()=>[t(O,null,{default:n(()=>[t(w,null,{default:n(()=>[N(s).submittalView==="cards"?(p(),V(xe,{key:0,dark:"",color:"purple-darken-2",class:"mb-0 d-flex justify-start"},{default:n(()=>[t(ie,{modelValue:b.value,"onUpdate:modelValue":i[0]||(i[0]=u=>b.value=u),clearable:"",flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Filter",class:"pr-1",density:"compact"},null,8,["modelValue"]),M("template",null,[t(ve),t(ae,{modelValue:v,"onUpdate:modelValue":i[1]||(i[1]=u=>v=u),flat:"","solo-inverted":"","hide-details":"",items:g,"prepend-inner-icon":"mdi-sort",label:"Sort by"}),t(ve),t(j,{modelValue:x.value,"onUpdate:modelValue":i[2]||(i[2]=u=>x.value=u),mandatory:""},{default:n(()=>[t(C,{large:"",depressed:"",color:"blue",value:!1},{default:n(()=>[t(E,null,{default:n(()=>i[18]||(i[18]=[f("mdi-arrow-up",-1)])),_:1,__:[18]})]),_:1}),t(C,{large:"",depressed:"",color:"blue",value:!0},{default:n(()=>[t(E,null,{default:n(()=>i[19]||(i[19]=[f("mdi-arrow-down",-1)])),_:1,__:[19]})]),_:1})]),_:1},8,["modelValue"])])]),_:1})):G("",!0),t(ce,{color:"purple-darken-2",class:"d-flex flex-wrap justify-start pa-2 mb-1",style:{width:"100%"}},{default:n(()=>[M("div",Fn,[t(j,{modelValue:D.value,"onUpdate:modelValue":i[3]||(i[3]=u=>D.value=u),dense:"","background-color":"primary",dark:"",multiple:""},{default:n(()=>[(p(!0),_(U,null,T(N(Ge).sortBy(N(a).projects,["name"]),u=>(p(),V(C,{color:"purple",key:u.name,value:u.name},{default:n(()=>[f(P(u.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(C,{dense:"",color:"red darken-3",onClick:i[4]||(i[4]=()=>D.value=["A","B","C","D"])},{default:n(()=>i[20]||(i[20]=[f(" All ",-1)])),_:1,__:[20]}),t(C,{dense:"",color:"red darken-3",onClick:i[5]||(i[5]=()=>D.value=[])},{default:n(()=>i[21]||(i[21]=[f(" None ",-1)])),_:1,__:[21]})]),M("div",Pn,[t(J,null,{default:n(()=>[t(O,null,{default:n(()=>[t(j,{modelValue:d.value,"onUpdate:modelValue":i[6]||(i[6]=u=>d.value=u),multiple:"",dense:"","background-color":"primary",dark:""},{default:n(()=>[(p(!0),_(U,null,T(le.sort(),u=>(p(),V(C,{color:"yellow darken-3",key:u,value:u},{default:n(()=>[f(P(u),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),Y(t(C,{dense:"",color:"red darken-3",onClick:i[7]||(i[7]=()=>o.value.owner=ue.value.map(u=>u.name))},{default:n(()=>i[22]||(i[22]=[f(" All ",-1)])),_:1,__:[22]},512),[[Q,d.value!=""]]),Y(t(C,{dense:"",color:"red darken-3",onClick:i[8]||(i[8]=()=>o.value.owner=[])},{default:n(()=>i[23]||(i[23]=[f(" None ",-1)])),_:1,__:[23]},512),[[Q,d.value!=""]])]),_:1}),t(O,{class:"d-inline-flex flex-wrap"},{default:n(()=>[t(_n,{modelValue:o.value.owner,"onUpdate:modelValue":i[9]||(i[9]=u=>o.value.owner=u),dense:"","background-color":"primary",multiple:"",dark:""},{default:n(()=>[(p(!0),_(U,null,T(ue.value.sort(function(u,A){return u.name.substring(u.name.indexOf(" ")+1).localeCompare(A.name.substring(A.name.indexOf(" ")+1))}),u=>(p(),V(Vn,{key:u.name,value:u.name},{default:n(({toggle:A})=>[t(C,{color:"grey-darken-3",class:"pa-1 ma-1 text-capitalize","active-color":"green",active:o.value.owner.includes(u.name),small:"",onClick:A},{default:n(()=>[f(P(u.name.substring(u.name.indexOf(" ")+1)),1)]),_:2},1032,["active","onClick"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),M("div",xn,[M("div",En,[t(j,{dense:"","background-color":"primary",exclusive:"",modelValue:o.value.peerReviewNeeded,"onUpdate:modelValue":i[10]||(i[10]=u=>o.value.peerReviewNeeded=u)},{default:n(()=>[t(C,{dense:"",color:"red darken-3",value:!0},{default:n(()=>i[24]||(i[24]=[f(" Peer Needed ",-1)])),_:1,__:[24]}),t(C,{dense:"",color:"red darken-3",value:!1},{default:n(()=>i[25]||(i[25]=[f(" Peer Assigned ",-1)])),_:1,__:[25]})]),_:1},8,["modelValue"])]),M("div",wn,[t(j,{dense:"","background-color":"primary",exclusive:"",modelValue:o.value.nrInformed,"onUpdate:modelValue":i[11]||(i[11]=u=>o.value.nrInformed=u)},{default:n(()=>[t(C,{dense:"",color:"blue darken-3",value:!0},{default:n(()=>i[26]||(i[26]=[f(" NR Informed ",-1)])),_:1,__:[26]}),t(C,{dense:"",color:"blue darken-3",value:!1},{default:n(()=>i[27]||(i[27]=[f(" NR Uninformed ",-1)])),_:1,__:[27]})]),_:1},8,["modelValue"])]),M("div",In,[t(j,{dense:"","background-color":"primary",exclusive:"",modelValue:o.value.open,"onUpdate:modelValue":i[12]||(i[12]=u=>o.value.open=u)},{default:n(()=>[t(C,{dense:"",color:"orange darken-3",value:!0},{default:n(()=>i[28]||(i[28]=[f(" Open ",-1)])),_:1,__:[28]}),t(C,{dense:"",color:"orange darken-3",value:!1},{default:n(()=>i[29]||(i[29]=[f(" Closed ",-1)])),_:1,__:[29]})]),_:1},8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),t(O,null,{default:n(()=>[t(w,{cols:"12"},{default:n(()=>[N(s).submittalView==="cards"?(p(),V(Sn,{key:0,items:z.value,"item-key":"_id","items-per-page":I.value,page:y.value,search:b.value,"sort-by":v,"sort-desc":x.value,"hide-default-footer":""},{default:n(({items:u})=>[t(O,null,{default:n(()=>[(p(!0),_(U,null,T(u,A=>(p(),V(w,{key:A._id,cols:"12",sm:"6",md:"4",lg:"3"},{default:n(()=>[t(S,{submittal:A.raw,color:H(A.raw.needDate,A.raw.dispositionDate)},null,8,["submittal","color"])]),_:2},1024))),128))]),_:2},1024)]),footer:n(()=>[t(O,{class:"mt-2",align:"center",justify:"center"},{default:n(()=>[i[33]||(i[33]=M("span",{class:"grey--text"},"Submittals per page",-1)),t(be,{"offset-y":""},{activator:n(({props:u})=>[t(C,Pe({dark:"",text:"",color:"primary",class:"ml-2"},u),{default:n(()=>[f(P(I.value)+" ",1),t(E,null,{default:n(()=>i[30]||(i[30]=[f("mdi-chevron-down",-1)])),_:1,__:[30]})]),_:2},1040)]),default:n(()=>[t(Ut,null,{default:n(()=>[(p(),_(U,null,T(c,(u,A)=>t(Tt,{key:A,onClick:Un=>ke(u)},{default:n(()=>[t(Gt,null,{default:n(()=>[f(P(u),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1}),t(ve),M("span",$n," Page "+P(y.value)+" of "+P(te.value===0?1:te.value),1),t(C,{fab:"",dark:"",color:"blue darken-3",class:"mr-1",onClick:Ae},{default:n(()=>[t(E,null,{default:n(()=>i[31]||(i[31]=[f("mdi-chevron-left",-1)])),_:1,__:[31]})]),_:1}),t(C,{fab:"",dark:"",color:"blue darken-3",class:"ml-1",onClick:De},{default:n(()=>[t(E,null,{default:n(()=>i[32]||(i[32]=[f("mdi-chevron-right",-1)])),_:1,__:[32]})]),_:1})]),_:1,__:[33]})]),_:1},8,["items","items-per-page","page","search","sort-desc"])):G("",!0)]),_:1})]),_:1})]),_:1}),N(s).submittalView==="table"?(p(),V(J,{key:0,fluid:"",class:"py-0 my-0"},{default:n(()=>[t(At,{headers:Be,items:z.value,"item-key":"submittalID","sort-by":["submittalID","owner"],"sort-desc":[!1,!0],"multi-sort":"","show-expand":"",expanded:$.value,"onUpdate:expanded":i[13]||(i[13]=u=>$.value=u)},{"item.submittalID":n(({item:u})=>[t(ce,{color:H(u.needDate,u.dispositionDate),rounded:"",class:"d-flex justify-center pa-1 ma-0"},{default:n(()=>[f(P(u.submittalID),1)]),_:2},1032,["color"])]),"item.description":n(u=>[t(ie,{modelValue:u.item.description,"onUpdate:modelValue":A=>u.item.description=A,density:"compact",variant:"plain",rules:[Ce],label:"Edit","single-line":"",counter:""},null,8,["modelValue","onUpdate:modelValue","rules"])]),"item.receivedDate":n(({item:u})=>[t(F,{dateProp:u.receivedDate,iconProp:"mdi-calendar-today",onUpdateDate:A=>u.receivedDate=A},null,8,["dateProp","onUpdateDate"])]),"item.needDate":n(({item:u})=>[t(F,{dateProp:u.needDate,iconProp:"mdi-calendar-clock",onUpdateDate:A=>u.needDate=A},null,8,["dateProp","onUpdateDate"])]),"item.dispositionDate":n(({item:u})=>[t(F,{dateProp:u.dispositionDate,iconProp:"mdi-calendar-check",onUpdateDate:A=>u.dispositionDate=A},null,8,["dateProp","onUpdateDate"])]),"item.priority":n(({item:u})=>[t(he,{submittalProp:u,color:H(u.needDate,u.dispositionDate)},null,8,["submittalProp","color"])]),"item.save":n(({item:u})=>[t(C,{icon:"",onClick:A=>ye(u)},{default:n(()=>[t(E,null,{default:n(()=>i[34]||(i[34]=[f("mdi-content-save-edit",-1)])),_:1,__:[34]})]),_:2},1032,["onClick"])]),"expanded-row":n(({columns:u,item:A})=>[M("td",{colspan:u.length,class:"pa-0 ma-0"},[t(fe,{class:"pa-2"},{default:n(()=>i[35]||(i[35]=[f("Stakeholders",-1)])),_:1,__:[35]}),t(re,{stakeholders:A.stakeholders,view:"table"},null,8,["stakeholders"]),t(fe,{class:"pa-2"},{default:n(()=>i[36]||(i[36]=[f("Violations",-1)])),_:1,__:[36]}),t(nt,{violations:A.violations},null,8,["violations"])],8,Mn)]),_:2},1032,["items","expanded"])]),_:1})):G("",!0),N(s).submittalView==="calendar"?(p(),V(J,{key:1,fluid:"",class:"py-0 my-0"},{default:n(()=>[M("template",null,[t(O,{class:"fill-height"},{default:n(()=>[t(w,null,{default:n(()=>[t(ce,{height:"64"},{default:n(()=>[t(xe,{flat:""},{default:n(()=>[t(C,{fab:"",text:"",small:"",color:"grey darken-2",onClick:i[14]||(i[14]=u=>r.value.prev())},{default:n(()=>[t(E,null,{default:n(()=>i[37]||(i[37]=[f(" mdi-chevron-left ",-1)])),_:1,__:[37]})]),_:1}),M("h1",On,P(N(ne)(m.value).format("MMMM YYYY")),1),t(C,{fab:"",text:"",small:"",color:"grey darken-2",onClick:i[15]||(i[15]=u=>r.value.next())},{default:n(()=>[t(E,null,{default:n(()=>i[38]||(i[38]=[f(" mdi-chevron-right ",-1)])),_:1,__:[38]})]),_:1})]),_:1})]),_:1}),t(ce,null,{default:n(()=>[t(at,{ref_key:"calendar",ref:r,modelValue:m.value,"onUpdate:modelValue":i[16]||(i[16]=u=>m.value=u),color:"primary",type:"month","show-month-on-first":!1,events:Se.value,"event-more":!1,"event-color":ee,"onClick:event":X},null,8,["modelValue","events"]),t(be,{modelValue:L.value,"onUpdate:modelValue":i[17]||(i[17]=u=>L.value=u),"close-on-content-click":!1,activator:oe.value,"offset-y":"","offset-overflow":"","max-width":"600"},{default:n(()=>[t(S,{submittal:Z.value.submittal.raw,color:ee(Z.value)},null,8,["submittal","color"])]),_:1},8,["modelValue","activator"])]),_:1})]),_:1})]),_:1})])]),_:1})):G("",!0)])}}},Rn=pe(Nn,[["__scopeId","data-v-81c0835b"]]),Hn={__name:"index",setup(e){return(l,a)=>{const s=Rn;return p(),V(s)}}};export{Hn as default};
