import{_ as A,r as S,F as J,G as O,I as p,o as s,b as e,w as t,d as G,t as r,g as u,P as f,N as k,O as x,a as g,K as U,Q as K,R as M,v,S as C,J as Q,L as Y,T as q,x as H,y as W}from"./index-BjhXf6PQ.js";import{V as N}from"./vue-draggable-next.esm-bundler-CZyX6F1m.js";import{a as E,b as F,c as z,d as X,V as Z,_ as j}from"./lodash-CnCsj6rY.js";import{b as P,d as T,e as c,c as B,V as h,a as $,f as L,g as ee}from"./VCard-DZx5bLbS.js";const te={__name:"ProjectComponent",props:{project:{}},setup(I){const l=S(I.project);J();const i=O(),m=d=>{i.updateSubmittalPriorities(d)},w=d=>{console.log(`Try to delete ${d} contract`),console.log("Contracts: "+JSON.stringify(l._rawValue.contracts)),l._rawValue.contracts=j.reject(l._rawValue.contracts,a=>a.contractID==d),l._value.contracts=j.reject(l._value.contracts,a=>a.contractID==d)},o=S(!1),D=S(""),b=S([]),R={contractID:[d=>d?!0:"You must enter a contract ID."]};return(d,a)=>(s(),p("div",null,[e(B,{fluid:""},{default:t(()=>[e(P,{rounded:""},{default:t(()=>[e(T,{class:"purple darken-3 pa-4 ma-0"},{default:t(()=>[G("h1",null,r(l.value.name),1)]),_:1}),e(c,{class:"pa-2 ma-2"},{default:t(()=>[u(r(l.value.prioritySubmittals.length+l.value.unrankedSubmittals.length)+" submittals ",1)]),_:1}),e(B,{fluid:""},{default:t(()=>[e(h,null,{default:t(()=>[e($,{cols:"6","align-self":"start"},{default:t(()=>[e(c,{class:"py-0"},{default:t(()=>a[11]||(a[11]=[u("Priority Submittals")])),_:1}),e(f(N),{modelValue:l.value.prioritySubmittals,"onUpdate:modelValue":a[1]||(a[1]=n=>l.value.prioritySubmittals=n),group:l.value.name+"Submittals",draggable:".item",handle:".handle",sort:"true",onChange:a[2]||(a[2]=n=>m(l.value)),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:t(()=>[(s(!0),p(k,null,x(l.value.prioritySubmittals,(n,_)=>(s(),g(P,{key:n._id,class:"item draggable-item mb-2"},{default:t(()=>[e(T,{class:"py-1 handle"},{default:t(()=>[u(r(_+1)+". "+r(n.submittal.submittalID),1)]),_:2},1024),e(c,{class:"pt-5 pb-1 nondraggable-item"},{default:t(()=>[u(r(n.submittal.description),1)]),_:2},1024),e(L,{class:"py-0 my-0 nondraggable-item"},{default:t(()=>[e(U,{"single-line":"",modelValue:n.driver,"onUpdate:modelValue":y=>n.driver=y,cols:"8",label:"Priority driver",class:"mx-6",onChange:a[0]||(a[0]=y=>m(l.value))},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","group"])]),_:1}),e($,{cols:"6","align-self":"start"},{default:t(()=>[e(c,{class:"py-0"},{default:t(()=>a[12]||(a[12]=[u("Unranked Submittals")])),_:1}),e(f(N),{modelValue:l.value.unrankedSubmittals,"onUpdate:modelValue":a[4]||(a[4]=n=>l.value.unrankedSubmittals=n),group:l.value.name+"Submittals",draggable:".item",handle:".handle",sort:"true",onChange:a[5]||(a[5]=n=>m(l.value)),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:t(()=>[(s(!0),p(k,null,x(l.value.unrankedSubmittals,(n,_)=>(s(),g(P,{key:n._id,class:"item draggable-item mb-2"},{default:t(()=>[e(T,{class:"py-1 handle"},{default:t(()=>[u(r(_+1)+". "+r(n.submittal.submittalID),1)]),_:2},1024),e(c,{class:"pt-5 pb-1 nondraggable-item"},{default:t(()=>[u(r(n.submittal.description),1)]),_:2},1024),e(L,{class:"py-0 my-0 nondraggable-item"},{default:t(()=>[e(U,{"single-line":"",modelValue:n.driver,"onUpdate:modelValue":y=>n.driver=y,cols:"8",label:"Priority driver",class:"mx-6",onChange:a[3]||(a[3]=y=>m(l.value))},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","group"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(c,{class:"pa-2 ma-2"},{default:t(()=>[u(r(l.value.contracts.length)+" contracts ",1)]),_:1}),e(K,{"max-width":"300"},{default:t(()=>[e(E,{class:"my-4",variant:"popout"},{default:t(()=>[(s(!0),p(k,null,x(l.value.contracts,n=>(s(),g(F,{key:n.contractID,title:n.contractID},{default:t(()=>[e(z,null,{default:t(()=>[a[17]||(a[17]=u(" Lorem ipsum stuff and things and all that Latin jazz 'n'at. ")),e(P,null,{default:t(()=>[e(ee,{class:"grey darken-4"},{default:t(()=>[e(M),e(v,{icon:"",onClick:_=>d.saveContract(n)},{default:t(()=>[e(C,null,{default:t(()=>a[13]||(a[13]=[u("mdi-content-save-edit")])),_:1})]),_:2},1032,["onClick"]),e(v,{icon:""},{default:t(()=>[e(C,null,{default:t(()=>a[14]||(a[14]=[u("mdi-archive-plus")])),_:1})]),_:1}),e(v,{icon:""},{default:t(()=>[e(C,null,{default:t(()=>a[15]||(a[15]=[u("mdi-file-pdf-box")])),_:1})]),_:1}),e(v,{icon:"",onClick:_=>w(n.contractID)},{default:t(()=>[e(C,null,{default:t(()=>a[16]||(a[16]=[u("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:1}),e(E,{class:"my-4",variant:"popout",modelValue:b.value,"onUpdate:modelValue":a[10]||(a[10]=n=>b.value=n)},{default:t(()=>[e(F,{value:"addContract"},{default:t(()=>[e(X,{"collapse-icon":"mdi-minus","expand-icon":"mdi-plus"},{default:t(()=>a[18]||(a[18]=[u("Add contract")])),_:1}),e(z,null,{default:t(()=>[e(Z,{onSubmit:a[8]||(a[8]=Q(()=>{},["prevent"])),modelValue:o.value,"onUpdate:modelValue":a[9]||(a[9]=n=>o.value=n)},{default:t(()=>[e(U,{modelValue:D.value,"onUpdate:modelValue":a[6]||(a[6]=n=>D.value=n),label:"Contract ID","max-width":"150",rules:R.contractID},null,8,["modelValue","rules"]),e(v,{type:"submit",onClick:a[7]||(a[7]=n=>{l.value.contracts.push({contractID:D.value}),f(i).updateSubmittalPriorities(l.value),o.value?b.value=[]:b.value=b.value})},{default:t(()=>[e(C,null,{default:t(()=>a[19]||(a[19]=[u("mdi-check")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},ae=A(te,[["__scopeId","data-v-927fd622"]]),le={__name:"ProjectsComponent",setup(I){J();const V=O(),l=S(V.projects.map(i=>i.name));return(i,m)=>{const w=ae;return s(),p("div",null,[e(q,{dark:"",color:"grey darken-4",class:"mb-1"},{default:t(()=>[e(Y,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=o=>l.value=o),dense:"","background-color":"primary",dark:"",multiple:""},{default:t(()=>[(s(!0),p(k,null,x(f(j).sortBy(f(V).projects,["name"]),o=>(s(),g(v,{key:o.name,value:o.name},{default:t(()=>[u(r(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(B,{fluid:""},{default:t(()=>[(s(!0),p(k,null,x(f(j).sortBy(f(V).projects,["name"]),o=>H((s(),g(w,{key:o.name,class:"ma-2",project:o},null,8,["project"])),[[W,l.value.includes(o.name)]])),128))]),_:1})])}}},ne=A(le,[["__scopeId","data-v-a8b453f2"]]),de={__name:"index",setup(I){return(V,l)=>{const i=ne;return s(),g(i)}}};export{de as default};
