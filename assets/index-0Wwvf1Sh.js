import{_ as z,S as F,T as O,B as I,W as p,r,f as t,w as e,s as M,y as d,x as o,a1 as g,$ as j,a0 as k,q as _,Y as D,a2 as Y,a3 as q,I as c,a4 as f,a5 as K,a6 as R,a7 as w,X as W,Z as X,a8 as Z,J as G,K as H}from"./index-pmq8Ma7Z.js";import{V as B}from"./vue-draggable-next.esm-bundler-C18seiKs.js";import{a as N,b as E,c as J,d as Q,V as h,_ as P}from"./lodash-JmIeGm_b.js";import{b as x,d as U,e as y,c as T,V as tt,a as $,f as L,g as et}from"./VCard-DRrBtofY.js";const at={__name:"ProjectComponent",props:{project:{}},setup(n){F();const m=O(),i=s=>{console.log("project: "+JSON.stringify(s)),console.log("priority: "+JSON.stringify(s.prioritySubmittals)),m.updateSubmittalPriorities(s)},V=(s,a)=>{console.log("project: "+JSON.stringify(s)),console.log(`Try to delete ${a} contract`),console.log("Contracts: "+JSON.stringify(s.contracts)),s.contracts=P.reject(s.contracts,l=>l.contractID==a),s.contracts=P.reject(s.contracts,l=>l.contractID==a),m.updateContracts(s)},b=I(!1),v=I(""),u=I([]),A={contractID:[s=>s?!0:"You must enter a contract ID."]};return(s,a)=>(r(),p("div",null,[t(T,{fluid:""},{default:e(()=>[t(x,{rounded:""},{default:e(()=>[t(U,{class:"purple darken-3 pa-4 ma-0"},{default:e(()=>[M("h1",null,d(n.project.name),1)]),_:1}),t(y,{class:"pa-2 ma-2"},{default:e(()=>[o(d(n.project.prioritySubmittals.length+n.project.unrankedSubmittals.length)+" submittals ",1)]),_:1}),t(T,{fluid:""},{default:e(()=>[t(tt,null,{default:e(()=>[t($,{cols:"6","align-self":"start"},{default:e(()=>[t(y,{class:"py-0"},{default:e(()=>a[11]||(a[11]=[o("Priority Submittals",-1)])),_:1,__:[11]}),t(g(B),{modelValue:n.project.prioritySubmittals,"onUpdate:modelValue":a[1]||(a[1]=l=>n.project.prioritySubmittals=l),group:n.project.name+"Submittals",draggable:".item",handle:".handle",sort:"true",onChange:a[2]||(a[2]=l=>i(n.project)),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:e(()=>[(r(!0),p(j,null,k(n.project.prioritySubmittals,(l,C)=>(r(),_(x,{key:l._id,class:"item draggable-item mb-2"},{default:e(()=>[t(U,{class:"py-1 handle"},{default:e(()=>[o(d(C+1)+". "+d(l.submittal.submittalID),1)]),_:2},1024),t(y,{class:"pt-5 pb-1 nondraggable-item"},{default:e(()=>[o(d(l.submittal.description),1)]),_:2},1024),t(L,{class:"py-0 my-0 nondraggable-item"},{default:e(()=>[t(D,{"single-line":"",modelValue:l.driver,"onUpdate:modelValue":S=>l.driver=S,cols:"8",label:"Priority driver",class:"mx-6",onChange:a[0]||(a[0]=S=>i(n.project)),density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","group"])]),_:1}),t($,{cols:"6","align-self":"start"},{default:e(()=>[t(y,{class:"py-0"},{default:e(()=>a[12]||(a[12]=[o("Unranked Submittals",-1)])),_:1,__:[12]}),t(g(B),{modelValue:n.project.unrankedSubmittals,"onUpdate:modelValue":a[4]||(a[4]=l=>n.project.unrankedSubmittals=l),group:n.project.name+"Submittals",draggable:".item",handle:".handle",sort:"true",onChange:a[5]||(a[5]=l=>i(n.project)),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:e(()=>[(r(!0),p(j,null,k(n.project.unrankedSubmittals,(l,C)=>(r(),_(x,{key:l._id,class:"item draggable-item mb-2"},{default:e(()=>[t(U,{class:"py-1 handle"},{default:e(()=>[o(d(C+1)+". "+d(l.submittal.submittalID),1)]),_:2},1024),t(y,{class:"pt-5 pb-1 nondraggable-item"},{default:e(()=>[o(d(l.submittal.description),1)]),_:2},1024),t(L,{class:"py-0 my-0 nondraggable-item"},{default:e(()=>[t(D,{"single-line":"",modelValue:l.driver,"onUpdate:modelValue":S=>l.driver=S,cols:"8",label:"Priority driver",class:"mx-6",onChange:a[3]||(a[3]=S=>i()),density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","group"])]),_:1}),t($,{cols:"12"},{default:e(()=>[t(y,{class:"pa-2 ma-2"},{default:e(()=>[o(d(n.project.contracts.length)+" contracts ",1)]),_:1}),t(Y,{"max-width":"300"},{default:e(()=>[t(N,{class:"my-4",variant:"popout"},{default:e(()=>[(r(!0),p(j,null,k(n.project.contracts,l=>(r(),_(E,{key:l.contractID,title:l.contractID},{default:e(()=>[t(J,null,{default:e(()=>[a[19]||(a[19]=o(" Lorem ipsum stuff and things and all that Latin jazz 'n'at. ",-1)),t(x,null,{default:e(()=>[t(et,{class:"grey darken-4"},{default:e(()=>[t(q),t(c,{icon:"",onClick:C=>s.saveContract(l)},{default:e(()=>[t(f,null,{default:e(()=>a[13]||(a[13]=[o("mdi-content-save-edit",-1)])),_:1,__:[13]})]),_:2},1032,["onClick"]),t(c,{icon:""},{default:e(()=>[t(f,null,{default:e(()=>a[14]||(a[14]=[o("mdi-archive-plus",-1)])),_:1,__:[14]})]),_:1}),t(c,{icon:""},{default:e(()=>[t(f,null,{default:e(()=>a[15]||(a[15]=[o("mdi-file-pdf-box",-1)])),_:1,__:[15]})]),_:1}),t(c,{icon:""},{default:e(()=>[t(f,null,{default:e(()=>a[16]||(a[16]=[o("mdi-delete",-1)])),_:1,__:[16]}),t(K,{activator:"parent",location:"center"},{default:e(()=>[t(R,null,{default:e(()=>[t(w,null,{default:e(()=>[t(c,{icon:"",onClick:C=>V(n.project,l.contractID)},{default:e(()=>[t(f,null,{default:e(()=>a[17]||(a[17]=[o("mdi-check",-1)])),_:1,__:[17]})]),_:2},1032,["onClick"])]),_:2},1024),t(w,null,{default:e(()=>[t(c,{icon:""},{default:e(()=>[t(f,null,{default:e(()=>a[18]||(a[18]=[o("mdi-cancel",-1)])),_:1,__:[18]})]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2,__:[19]},1024)]),_:2},1032,["title"]))),128))]),_:1}),t(N,{class:"my-4",variant:"popout",modelValue:u.value,"onUpdate:modelValue":a[10]||(a[10]=l=>u.value=l)},{default:e(()=>[t(E,{value:"addContract"},{default:e(()=>[t(Q,{"collapse-icon":"mdi-minus","expand-icon":"mdi-plus"},{default:e(()=>a[20]||(a[20]=[o("Add contract",-1)])),_:1,__:[20]}),t(J,null,{default:e(()=>[t(h,{onSubmit:a[8]||(a[8]=W(()=>{},["prevent"])),modelValue:b.value,"onUpdate:modelValue":a[9]||(a[9]=l=>b.value=l)},{default:e(()=>[t(D,{modelValue:v.value,"onUpdate:modelValue":a[6]||(a[6]=l=>v.value=l),label:"Contract ID","max-width":"150",rules:A.contractID,density:"compact"},null,8,["modelValue","rules"]),t(c,{type:"submit",onClick:a[7]||(a[7]=l=>{n.project.contracts.push({contractID:v.value}),g(m).updateSubmittalPriorities(n.project),b.value?u.value=[]:u.value=u.value,v.value=""})},{default:e(()=>[t(f,null,{default:e(()=>a[21]||(a[21]=[o("mdi-check",-1)])),_:1,__:[21]})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},lt=z(at,[["__scopeId","data-v-901c44ea"]]),nt={__name:"ProjectsComponent",setup(n){F();const m=O(),i=I(m.projects.map(V=>V.name));return(V,b)=>{const v=lt;return r(),p("div",null,[t(Z,{dark:"",color:"grey darken-4",class:"mb-1"},{default:e(()=>[t(X,{modelValue:i.value,"onUpdate:modelValue":b[0]||(b[0]=u=>i.value=u),dense:"","background-color":"primary",dark:"",multiple:""},{default:e(()=>[(r(!0),p(j,null,k(g(P).sortBy(g(m).projects,["name"]),u=>(r(),_(c,{key:u.name,value:u.name},{default:e(()=>[o(d(u.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(T,{fluid:""},{default:e(()=>[(r(!0),p(j,null,k(g(P).sortBy(g(m).projects,["name"]),u=>G((r(),_(v,{key:u.name,class:"ma-2",project:u},null,8,["project"])),[[H,i.value.includes(u.name)]])),128))]),_:1})])}}},ot=z(nt,[["__scopeId","data-v-a8b453f2"]]),it={__name:"index",setup(n){return(m,i)=>{const V=ot;return r(),_(V)}}};export{it as default};
