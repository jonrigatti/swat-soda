import{_ as J,F as O,G as z,r as _,I as p,o as s,b as t,w as e,d as M,t as d,g as o,P as g,N as k,O as x,a as C,K as D,Q as R,R as G,v as c,S as f,T as K,U as Q,W as w,J as W,L as X,X as Y,x as q,y as H}from"./index-Ig2vBY7j.js";import{V as N}from"./vue-draggable-next.esm-bundler-D4-1j-4e.js";import{a as B,b as L,c as E,d as Z,V as h,_ as I}from"./lodash-tO2rkIrN.js";import{b as P,d as U,e as y,c as $,V as tt,a as T,f as F,g as et}from"./VCard-CmRTZwCh.js";const lt={__name:"ProjectComponent",props:{project:{}},setup(n){O();const m=z(),i=r=>{console.log("project: "+JSON.stringify(r)),console.log("priority: "+JSON.stringify(r.prioritySubmittals)),m.updateSubmittalPriorities(r)},V=(r,l)=>{console.log("project: "+JSON.stringify(r)),console.log(`Try to delete ${l} contract`),console.log("Contracts: "+JSON.stringify(r.contracts)),r.contracts=I.reject(r.contracts,a=>a.contractID==l),r.contracts=I.reject(r.contracts,a=>a.contractID==l),m.updateContracts(r)},b=_(!1),v=_(""),u=_([]),A={contractID:[r=>r?!0:"You must enter a contract ID."]};return(r,l)=>(s(),p("div",null,[t($,{fluid:""},{default:e(()=>[t(P,{rounded:""},{default:e(()=>[t(U,{class:"purple darken-3 pa-4 ma-0"},{default:e(()=>[M("h1",null,d(n.project.name),1)]),_:1}),t(y,{class:"pa-2 ma-2"},{default:e(()=>[o(d(n.project.prioritySubmittals.length+n.project.unrankedSubmittals.length)+" submittals ",1)]),_:1}),t($,{fluid:""},{default:e(()=>[t(tt,null,{default:e(()=>[t(T,{cols:"6","align-self":"start"},{default:e(()=>[t(y,{class:"py-0"},{default:e(()=>l[11]||(l[11]=[o("Priority Submittals")])),_:1}),t(g(N),{modelValue:n.project.prioritySubmittals,"onUpdate:modelValue":l[1]||(l[1]=a=>n.project.prioritySubmittals=a),group:n.project.name+"Submittals",draggable:".item",handle:".handle",sort:"true",onChange:l[2]||(l[2]=a=>i(n.project)),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:e(()=>[(s(!0),p(k,null,x(n.project.prioritySubmittals,(a,S)=>(s(),C(P,{key:a._id,class:"item draggable-item mb-2"},{default:e(()=>[t(U,{class:"py-1 handle"},{default:e(()=>[o(d(S+1)+". "+d(a.submittal.submittalID),1)]),_:2},1024),t(y,{class:"pt-5 pb-1 nondraggable-item"},{default:e(()=>[o(d(a.submittal.description),1)]),_:2},1024),t(F,{class:"py-0 my-0 nondraggable-item"},{default:e(()=>[t(D,{"single-line":"",modelValue:a.driver,"onUpdate:modelValue":j=>a.driver=j,cols:"8",label:"Priority driver",class:"mx-6",onChange:l[0]||(l[0]=j=>i(n.project))},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","group"])]),_:1}),t(T,{cols:"6","align-self":"start"},{default:e(()=>[t(y,{class:"py-0"},{default:e(()=>l[12]||(l[12]=[o("Unranked Submittals")])),_:1}),t(g(N),{modelValue:n.project.unrankedSubmittals,"onUpdate:modelValue":l[4]||(l[4]=a=>n.project.unrankedSubmittals=a),group:n.project.name+"Submittals",draggable:".item",handle:".handle",sort:"true",onChange:l[5]||(l[5]=a=>i(n.project)),animation:"250",easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"ghost"},{default:e(()=>[(s(!0),p(k,null,x(n.project.unrankedSubmittals,(a,S)=>(s(),C(P,{key:a._id,class:"item draggable-item mb-2"},{default:e(()=>[t(U,{class:"py-1 handle"},{default:e(()=>[o(d(S+1)+". "+d(a.submittal.submittalID),1)]),_:2},1024),t(y,{class:"pt-5 pb-1 nondraggable-item"},{default:e(()=>[o(d(a.submittal.description),1)]),_:2},1024),t(F,{class:"py-0 my-0 nondraggable-item"},{default:e(()=>[t(D,{"single-line":"",modelValue:a.driver,"onUpdate:modelValue":j=>a.driver=j,cols:"8",label:"Priority driver",class:"mx-6",onChange:l[3]||(l[3]=j=>i())},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","group"])]),_:1}),t(T,{cols:"12"},{default:e(()=>[t(y,{class:"pa-2 ma-2"},{default:e(()=>[o(d(n.project.contracts.length)+" contracts ",1)]),_:1}),t(R,{"max-width":"300"},{default:e(()=>[t(B,{class:"my-4",variant:"popout"},{default:e(()=>[(s(!0),p(k,null,x(n.project.contracts,a=>(s(),C(L,{key:a.contractID,title:a.contractID},{default:e(()=>[t(E,null,{default:e(()=>[l[19]||(l[19]=o(" Lorem ipsum stuff and things and all that Latin jazz 'n'at. ")),t(P,null,{default:e(()=>[t(et,{class:"grey darken-4"},{default:e(()=>[t(G),t(c,{icon:"",onClick:S=>r.saveContract(a)},{default:e(()=>[t(f,null,{default:e(()=>l[13]||(l[13]=[o("mdi-content-save-edit")])),_:1})]),_:2},1032,["onClick"]),t(c,{icon:""},{default:e(()=>[t(f,null,{default:e(()=>l[14]||(l[14]=[o("mdi-archive-plus")])),_:1})]),_:1}),t(c,{icon:""},{default:e(()=>[t(f,null,{default:e(()=>l[15]||(l[15]=[o("mdi-file-pdf-box")])),_:1})]),_:1}),t(c,{icon:""},{default:e(()=>[t(f,null,{default:e(()=>l[16]||(l[16]=[o("mdi-delete")])),_:1}),t(K,{activator:"parent",location:"center"},{default:e(()=>[t(Q,null,{default:e(()=>[t(w,null,{default:e(()=>[t(c,{icon:"",onClick:S=>V(n.project,a.contractID)},{default:e(()=>[t(f,null,{default:e(()=>l[17]||(l[17]=[o("mdi-check")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024),t(w,null,{default:e(()=>[t(c,{icon:""},{default:e(()=>[t(f,null,{default:e(()=>l[18]||(l[18]=[o("mdi-cancel")])),_:1})]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:1}),t(B,{class:"my-4",variant:"popout",modelValue:u.value,"onUpdate:modelValue":l[10]||(l[10]=a=>u.value=a)},{default:e(()=>[t(L,{value:"addContract"},{default:e(()=>[t(Z,{"collapse-icon":"mdi-minus","expand-icon":"mdi-plus"},{default:e(()=>l[20]||(l[20]=[o("Add contract")])),_:1}),t(E,null,{default:e(()=>[t(h,{onSubmit:l[8]||(l[8]=W(()=>{},["prevent"])),modelValue:b.value,"onUpdate:modelValue":l[9]||(l[9]=a=>b.value=a)},{default:e(()=>[t(D,{modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=a=>v.value=a),label:"Contract ID","max-width":"150",rules:A.contractID},null,8,["modelValue","rules"]),t(c,{type:"submit",onClick:l[7]||(l[7]=a=>{n.project.contracts.push({contractID:v.value}),g(m).updateSubmittalPriorities(n.project),b.value?u.value=[]:u.value=u.value,v.value=""})},{default:e(()=>[t(f,null,{default:e(()=>l[21]||(l[21]=[o("mdi-check")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},at=J(lt,[["__scopeId","data-v-4bc501d5"]]),nt={__name:"ProjectsComponent",setup(n){O();const m=z(),i=_(m.projects.map(V=>V.name));return(V,b)=>{const v=at;return s(),p("div",null,[t(Y,{dark:"",color:"grey darken-4",class:"mb-1"},{default:e(()=>[t(X,{modelValue:i.value,"onUpdate:modelValue":b[0]||(b[0]=u=>i.value=u),dense:"","background-color":"primary",dark:"",multiple:""},{default:e(()=>[(s(!0),p(k,null,x(g(I).sortBy(g(m).projects,["name"]),u=>(s(),C(c,{key:u.name,value:u.name},{default:e(()=>[o(d(u.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t($,{fluid:""},{default:e(()=>[(s(!0),p(k,null,x(g(I).sortBy(g(m).projects,["name"]),u=>q((s(),C(v,{key:u.name,class:"ma-2",project:u},null,8,["project"])),[[H,i.value.includes(u.name)]])),128))]),_:1})])}}},ot=J(nt,[["__scopeId","data-v-a8b453f2"]]),it={__name:"index",setup(n){return(m,i)=>{const V=ot;return s(),C(V)}}};export{it as default};
